/*! choices.js v4.0.0 | (c) 2018 Josh Johnson | https://github.com/jshjohnson/Choices#readme */ 
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Choices=t():e.Choices=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/public/assets/scripts/",t(t.s=42)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.getRandomNumber=function(e,t){return Math.floor(Math.random()*(t-e)+e)},r=t.generateChars=function(e){for(var t="",i=0;i<e;i++){t+=n(0,36).toString(36)}return t},o=(t.generateId=function(e,t){var i=e.id||e.name&&e.name+"-"+r(2)||r(4);return i=i.replace(/(:|\.|\[|\]|,)/g,""),i=t+"-"+i},t.getType=function(e){return Object.prototype.toString.call(e).slice(8,-1)}),s=t.isType=function(e,t){var i=o(t);return void 0!==t&&null!==t&&i===e},a=(t.isElement=function(e){return e instanceof Element},t.extend=function e(){for(var t={},i=arguments.length,n=0;n<i;n++){var r=arguments[n];s("Object",r)&&function(i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(s("Object",i[n])?t[n]=e(!0,t[n],i[n]):t[n]=i[n])}(r)}return t},t.wrap=function(e,t){return t=t||document.createElement("div"),e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t.appendChild(e)},t.findAncestor=function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},t.findAncestorByAttrName=function(e,t){for(var i=e;i;){if(i.hasAttribute(t))return i;i=i.parentElement}return null},t.getAdjacentEl=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e&&t){var n=e.parentNode.parentNode,r=Array.from(n.querySelectorAll(t));return r[r.indexOf(e)+(i>0?1:-1)]}},t.isScrolledIntoView=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e){return i>0?t.scrollTop+t.offsetHeight>=e.offsetTop+e.offsetHeight:e.offsetTop>=t.scrollTop}},t.stripHTML=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&rt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}),c=t.strToEl=function(){var e=document.createElement("div");return function(t){var i=t.trim(),n=void 0;for(e.innerHTML=i,n=e.children[0];e.firstChild;)e.removeChild(e.firstChild);return n}}();t.calcWidthOfInput=function(e,t){var i=e.value||e.placeholder,n=e.offsetWidth;if(i){var r=c("<span>"+a(i)+"</span>");if(r.style.position="absolute",r.style.padding="0",r.style.top="-9999px",r.style.left="-9999px",r.style.width="auto",r.style.whiteSpace="pre",document.body.contains(e)&&window.getComputedStyle){var o=window.getComputedStyle(e);o&&(r.style.fontSize=o.fontSize,r.style.fontFamily=o.fontFamily,r.style.fontWeight=o.fontWeight,r.style.fontStyle=o.fontStyle,r.style.letterSpacing=o.letterSpacing,r.style.textTransform=o.textTransform,r.style.padding=o.padding)}document.body.appendChild(r),requestAnimationFrame(function(){i&&r.offsetWidth!==e.offsetWidth&&(n=r.offsetWidth+4),document.body.removeChild(r),t.call(void 0,n+"px")})}else t.call(void 0,n+"px")},t.sortByAlpha=function(e,t){var i=(e.label||e.value).toLowerCase(),n=(t.label||t.value).toLowerCase();return i<n?-1:i>n?1:0},t.sortByScore=function(e,t){return e.score-t.score},t.dispatchEvent=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0});return e.dispatchEvent(n)},t.regexFilter=function(e,t){return!(!e||!t)&&new RegExp(t.source,"i").test(e)},t.getWindowHeight=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},t.reduceToValues=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return e.reduce(function(e,i){return e.push(i[t]),e},[])},t.fetchFromObject=function e(t,i){var n=i.indexOf(".");return n>-1?e(t[i.substring(0,n)],i.substr(n+1)):t[i]},t.isIE11=function(){return!(!navigator.userAgent.match(/Trident/)||!navigator.userAgent.match(/rv[ :]11/))},t.existsInArray=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";return e.some(function(e){return s("String",t)?e[i]===t.trim():e[i]===t})},t.cloneObject=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCROLLING_SPEED=t.KEY_CODES=t.ACTION_TYPES=t.EVENTS=t.DEFAULT_CONFIG=t.DEFAULT_CLASSNAMES=void 0;var n=i(0);t.DEFAULT_CLASSNAMES={containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",hiddenState:"is-hidden",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},t.DEFAULT_CONFIG={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,removeItems:!0,removeItemButton:!1,editItems:!1,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,regexFilter:null,shouldSort:!0,shouldSortItems:!1,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added.",addItemText:function(e){return'Press Enter to add <b>"'+(0,n.stripHTML)(e)+'"</b>'},maxItemText:function(e){return"Only "+e+" values can be added."},itemComparer:function(e,t){return e===t},fuseOptions:{includeScore:!0},callbackOnInit:null,callbackOnCreateTemplates:null},t.EVENTS={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem"},t.ACTION_TYPES={ADD_CHOICE:"ADD_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM",CLEAR_ALL:"CLEAR_ALL"},t.KEY_CODES={BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34},t.SCROLLING_SPEED=4},function(e,t,i){var n=i(34)("wks"),r=i(17),o=i(3).Symbol,s="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:r)("Symbol."+e))}).store=n},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t){var i=e.exports={version:"2.5.6"};"number"==typeof __e&&(__e=i)},function(e,t,i){"use strict";i(44),i(68)},function(e,t,i){var n=i(7),r=i(16);e.exports=i(9)?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n=i(8),r=i(48),o=i(49),s=Object.defineProperty;t.f=i(9)?Object.defineProperty:function(e,t,i){if(n(e),t=o(t,!0),n(i),r)try{return s(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var n=i(15);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,i){e.exports=!i(27)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedSelect=t.WrappedInput=t.List=t.Input=t.Container=t.Dropdown=t.ChoicesSelectMultiple=t.ChoicesSelectOne=t.ChoicesInput=void 0;var r=i(69),o=n(r),s=i(80),a=n(s),c=i(81),l=n(c),u=i(82),h=n(u),d=i(83),f=n(d),p=i(84),v=n(p),m=i(85),g=n(m),_=i(86),y=n(_),b=i(87),E=n(b);t.ChoicesInput=o.default,t.ChoicesSelectOne=a.default,t.ChoicesSelectMultiple=l.default,t.Dropdown=h.default,t.Container=f.default,t.Input=v.default,t.List=g.default,t.WrappedInput=y.default,t.WrappedSelect=E.default},function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.TEMPLATES=void 0;var r=i(79),o=function(e){return e&&e.__esModule?e:{default:e}}(r),s=i(0),a=t.TEMPLATES={containerOuter:function(e,t,i,n){var r="select-one"===n?'tabindex="0"':"",o="text"!==n?'role="listbox"':"",a="";return"text"!==n&&i&&(o='role="combobox"',a='aria-autocomplete="list"'),(0,s.strToEl)('\n      <div\n        class="'+e.containerOuter+'"\n        data-type="'+n+'"\n        '+o+"\n        "+r+"\n        "+a+'\n        aria-haspopup="true"\n        aria-expanded="false"\n        dir="'+t+'"\n        >\n      </div>\n    ')},containerInner:function(e){return(0,s.strToEl)('\n      <div class="'+e.containerInner+'"></div>\n    ')},itemList:function(e,t){var i,r=(0,o.default)(e.list,(i={},n(i,e.listSingle,t),n(i,e.listItems,!t),i));return(0,s.strToEl)('\n      <div class="'+r+'"></div>\n    ')},placeholder:function(e,t){return(0,s.strToEl)('\n      <div class="'+e.placeholder+'">\n        '+t+"\n      </div>\n    ")},item:function(e,t,i){var r,a=t.active?'aria-selected="true"':"",c=t.disabled?'aria-disabled="true"':"",l=(0,o.default)(e.item,(r={},n(r,e.highlightedState,t.highlighted),n(r,e.itemSelectable,!t.highlighted),n(r,e.placeholder,t.placeholder),r));if(i){var u;return l=(0,o.default)(e.item,(u={},n(u,e.highlightedState,t.highlighted),n(u,e.itemSelectable,!t.disabled),n(u,e.placeholder,t.placeholder),u)),(0,s.strToEl)('\n        <div\n          class="'+l+'"\n          data-item\n          data-id="'+t.id+'"\n          data-value="'+t.value+'"\n          data-deletable\n          '+a+"\n          "+c+"\n          >\n          "+t.label+'\x3c!--\n       --\x3e<button\n            type="button"\n            class="'+e.button+'"\n            data-button\n            aria-label="Remove item: \''+t.value+"'\"\n            >\n            Remove item\n          </button>\n        </div>\n      ")}return(0,s.strToEl)('\n      <div\n        class="'+l+'"\n        data-item\n        data-id="'+t.id+'"\n        data-value="'+t.value+'"\n        '+a+"\n        "+c+"\n        >\n        "+t.label+"\n      </div>\n    ")},choiceList:function(e,t){var i=t?"":'aria-multiselectable="true"';return(0,s.strToEl)('\n      <div\n        class="'+e.list+'"\n        dir="ltr"\n        role="listbox"\n        '+i+"\n        >\n      </div>\n    ")},choiceGroup:function(e,t){var i=t.disabled?'aria-disabled="true"':"",r=(0,o.default)(e.group,n({},e.itemDisabled,t.disabled));return(0,s.strToEl)('\n      <div\n        class="'+r+'"\n        data-group\n        data-id="'+t.id+'"\n        data-value="'+t.value+'"\n        role="group"\n        '+i+'\n        >\n        <div class="'+e.groupHeading+'">'+t.value+"</div>\n      </div>\n    ")},choice:function(e,t,i){var r,a=t.groupId>0?'role="treeitem"':'role="option"',c=(0,o.default)(e.item,e.itemChoice,(r={},n(r,e.itemDisabled,t.disabled),n(r,e.itemSelectable,!t.disabled),n(r,e.placeholder,t.placeholder),r));return(0,s.strToEl)('\n      <div\n        class="'+c+'"\n        data-select-text="'+i+'"\n        data-choice\n        data-id="'+t.id+'"\n        data-value="'+t.value+'"\n        '+(t.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable")+'\n        id="'+t.elementId+'"\n        '+a+"\n        >\n        "+t.label+"\n      </div>\n    ")},input:function(e){var t=(0,o.default)(e.input,e.inputCloned);return(0,s.strToEl)('\n      <input\n        type="text"\n        class="'+t+'"\n        autocomplete="off"\n        autocapitalize="off"\n        spellcheck="false"\n        role="textbox"\n        aria-autocomplete="list"\n        >\n    ')},dropdown:function(e){var t=(0,o.default)(e.list,e.listDropdown);return(0,s.strToEl)('\n      <div\n        class="'+t+'"\n        aria-expanded="false"\n        >\n      </div>\n    ')},notice:function(e,t){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=(0,o.default)(e.item,e.itemChoice,(i={},n(i,e.noResults,"no-results"===r),n(i,e.noChoices,"no-choices"===r),i));return(0,s.strToEl)('\n      <div class="'+a+'">\n        '+t+"\n      </div>\n    ")},option:function(e){return(0,s.strToEl)('\n      <option value="'+e.value+'" '+(e.selected?"selected":"")+" "+(e.disabled?"disabled":"")+">"+e.label+"</option>\n    ")}};t.default=a},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t){e.exports={}},function(e,t,i){var n=i(34)("keys"),r=i(17);e.exports=function(e){return n[e]||(n[e]=r(e))}},function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(38),a=i(75),c=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(){r(this,e),this._store=(0,s.createStore)(c.default,window.devToolsExtension?window.devToolsExtension():void 0)}return o(e,[{key:"subscribe",value:function(e){this._store.subscribe(e)}},{key:"dispatch",value:function(e){this._store.dispatch(e)}},{key:"getChoiceById",value:function(e){if(e){return this.activeChoices.find(function(t){return t.id===parseInt(e,10)})}return!1}},{key:"getGroupById",value:function(e){return this.groups.find(function(t){return t.id===parseInt(e,10)})}},{key:"state",get:function(){return this._store.getState()}},{key:"items",get:function(){return this.state.items}},{key:"activeItems",get:function(){return this.items.filter(function(e){return!0===e.active})}},{key:"highlightedActiveItems",get:function(){return this.items.filter(function(e){return e.active&&e.highlighted})}},{key:"choices",get:function(){return this.state.choices}},{key:"activeChoices",get:function(){return this.choices.filter(function(e){return!0===e.active})}},{key:"selectableChoices",get:function(){return this.choices.filter(function(e){return!0!==e.disabled})}},{key:"searchableChoices",get:function(){return this.selectableChoices.filter(function(e){return!0!==e.placeholder})}},{key:"placeholderChoice",get:function(){return[].concat(n(this.choices)).reverse().find(function(e){return!0===e.placeholder})}},{key:"groups",get:function(){return this.state.groups}},{key:"activeGroups",get:function(){var e=this.groups,t=this.choices;return e.filter(function(e){var i=!0===e.active&&!1===e.disabled,n=t.some(function(e){return!0===e.active&&!1===e.disabled});return i&&n},[])}}]),e}();t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearChoices=t.activateChoices=t.filterChoices=t.addChoice=void 0;var n=i(1);t.addChoice=function(e){var t=e.value,i=e.label,r=e.id,o=e.groupId,s=e.disabled,a=e.elementId,c=e.customProperties,l=e.placeholder,u=e.keyCode;return{type:n.ACTION_TYPES.ADD_CHOICE,value:t,label:i,id:r,groupId:o,disabled:s,elementId:a,customProperties:c,placeholder:l,keyCode:u}},t.filterChoices=function(e){return{type:n.ACTION_TYPES.FILTER_CHOICES,results:e}},t.activateChoices=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:n.ACTION_TYPES.ACTIVATE_CHOICES,active:e}},t.clearChoices=function(){return{type:n.ACTION_TYPES.CLEAR_CHOICES}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightItem=t.removeItem=t.addItem=void 0;var n=i(1);t.addItem=function(e){var t=e.value,i=e.label,r=e.id,o=e.choiceId,s=e.groupId,a=e.customProperties,c=e.placeholder,l=e.keyCode;return{type:n.ACTION_TYPES.ADD_ITEM,value:t,label:i,id:r,choiceId:o,groupId:s,customProperties:a,placeholder:c,keyCode:l}},t.removeItem=function(e,t){return{type:n.ACTION_TYPES.REMOVE_ITEM,id:e,choiceId:t}},t.highlightItem=function(e,t){return{type:n.ACTION_TYPES.HIGHLIGHT_ITEM,id:e,highlighted:t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addGroup=void 0;var n=i(1);t.addGroup=function(e,t,i,r){return{type:n.ACTION_TYPES.ADD_GROUP,value:e,id:t,active:i,disabled:r}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.clearAll=function(){return{type:"CLEAR_ALL"}},t.resetTo=function(e){return{type:"RESET_TO",state:e}}},function(e,t){e.exports=!1},function(e,t,i){var n=i(3),r=i(4),o=i(6),s=i(29),a=i(30),c=function(e,t,i){var l,u,h,d,f=e&c.F,p=e&c.G,v=e&c.S,m=e&c.P,g=e&c.B,_=p?n:v?n[t]||(n[t]={}):(n[t]||{}).prototype,y=p?r:r[t]||(r[t]={}),b=y.prototype||(y.prototype={});p&&(i=t);for(l in i)u=!f&&_&&void 0!==_[l],h=(u?_:i)[l],d=g&&u?a(h,n):m&&"function"==typeof h?a(Function.call,h):h,_&&s(_,l,h,e&c.U),y[l]!=h&&o(y,l,d),m&&b[l]!=h&&(b[l]=h)};n.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){var n=i(15),r=i(3).document,o=n(r)&&n(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,i){var n=i(3),r=i(6),o=i(10),s=i(17)("src"),a=Function.toString,c=(""+a).split("toString");i(4).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,i,a){var l="function"==typeof i;l&&(o(i,"name")||r(i,"name",t)),e[t]!==i&&(l&&(o(i,s)||r(i,s,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=i:a?e[t]?e[t]=i:r(e,t,i):(delete e[t],r(e,t,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(e,t,i){var n=i(50);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,i){var n=i(56),r=i(14);e.exports=function(e){return n(r(e))}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var n=i(13),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},function(e,t,i){var n=i(4),r=i(3),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i(25)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var n=i(7).f,r=i(10),o=i(2)("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,i){var n=i(14);e.exports=function(e){return Object(n(e))}},function(e,t,i){"use strict";function n(e){var t=C.call(e,k),i=e[k];try{e[k]=void 0;var n=!0}catch(e){}var r=w.call(e);return n&&(t?e[k]=i:delete e[k]),r}function r(e){return A.call(e)}function o(e){return null==e?void 0===e?P:x:D&&D in Object(e)?T(e):L(e)}function s(e,t){return function(i){return e(t(i))}}function a(e){return null!=e&&"object"==typeof e}function c(e){if(!K(e)||N(e)!=V)return!1;var t=j(e);if(null===t)return!0;var i=G.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Y.call(i)==H}function l(e,t,i){function n(){p===f&&(p=f.slice())}function r(){return d}function o(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return n(),p.push(e),function(){if(t){t=!1,n();var i=p.indexOf(e);p.splice(i,1)}}}function s(e){if(!q(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(v)throw new Error("Reducers may not dispatch actions.");try{v=!0,d=h(d,e)}finally{v=!1}for(var t=f=p,i=0;i<t.length;i++){(0,t[i])()}return e}function a(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");h=e,s({type:z.INIT})}function c(){var e,t=o;return e={subscribe:function(e){function i(){e.next&&e.next(r())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return i(),{unsubscribe:t(i)}}},e[W.a]=function(){return this},e}var u;if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(l)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,d=t,f=[],p=f,v=!1;return s({type:z.INIT}),u={dispatch:s,subscribe:o,getState:r,replaceReducer:a},u[W.a]=c,u}function u(e,t){var i=t&&t.type;return"Given action "+(i&&'"'+i.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function h(e){Object.keys(e).forEach(function(t){var i=e[t];if(void 0===i(void 0,{type:z.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===i(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+z.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function d(e){for(var t=Object.keys(e),i={},n=0;n<t.length;n++){var r=t[n];"function"==typeof e[r]&&(i[r]=e[r])}var o=Object.keys(i),s=void 0;try{h(i)}catch(e){s=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var n=!1,r={},a=0;a<o.length;a++){var c=o[a],l=i[c],h=e[c],d=l(h,t);if(void 0===d){var f=u(c,t);throw new Error(f)}r[c]=d,n=n||d!==h}return n?r:e}}function f(e,t){return function(){return t(e.apply(void 0,arguments))}}function p(e,t){if("function"==typeof e)return f(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var i=Object.keys(e),n={},r=0;r<i.length;r++){var o=i[r],s=e[o];"function"==typeof s&&(n[o]=f(s,t))}return n}function v(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function m(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(i,n,r){var o=e(i,n,r),s=o.dispatch,a=[],c={getState:o.getState,dispatch:function(e){return s(e)}};return a=t.map(function(e){return e(c)}),s=v.apply(void 0,a)(o.dispatch),J({},o,{dispatch:s})}}}Object.defineProperty(t,"__esModule",{value:!0});var g=i(70),_="object"==typeof self&&self&&self.Object===Object&&self,y=g.a||_||Function("return this")(),b=y,E=b.Symbol,I=E,S=Object.prototype,C=S.hasOwnProperty,w=S.toString,k=I?I.toStringTag:void 0,T=n,O=Object.prototype,A=O.toString,L=r,x="[object Null]",P="[object Undefined]",D=I?I.toStringTag:void 0,N=o,F=s,M=F(Object.getPrototypeOf,Object),j=M,K=a,V="[object Object]",B=Function.prototype,R=Object.prototype,Y=B.toString,G=R.hasOwnProperty,H=Y.call(Object),q=c,U=i(71),W=i.n(U),z={INIT:"@@redux/INIT"},J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};i.d(t,"createStore",function(){return l}),i.d(t,"combineReducers",function(){return d}),i.d(t,"bindActionCreators",function(){return p}),i.d(t,"applyMiddleware",function(){return m}),i.d(t,"compose",function(){return v})},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){!function(t,i){e.exports=i()}(0,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,i){"use strict";e.exports=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(5),s=i(7),a=i(4),c=function(){function e(t,i){var r=i.location,o=void 0===r?0:r,s=i.distance,c=void 0===s?100:s,l=i.threshold,u=void 0===l?.6:l,h=i.maxPatternLength,d=void 0===h?32:h,f=i.isCaseSensitive,p=void 0!==f&&f,v=i.tokenSeparator,m=void 0===v?/ +/g:v,g=i.findAllMatches,_=void 0!==g&&g,y=i.minMatchCharLength,b=void 0===y?1:y;n(this,e),this.options={location:o,distance:c,threshold:u,maxPatternLength:d,isCaseSensitive:p,tokenSeparator:m,findAllMatches:_,minMatchCharLength:b},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=d&&(this.patternAlphabet=a(this.pattern))}return r(e,[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,i=t.maxPatternLength,n=t.tokenSeparator;if(this.pattern.length>i)return o(e,this.pattern,n);var r=this.options,a=r.location,c=r.distance,l=r.threshold,u=r.findAllMatches,h=r.minMatchCharLength;return s(e,this.pattern,this.patternAlphabet,{location:a,distance:c,threshold:l,findAllMatches:u,minMatchCharLength:h})}}]),e}();e.exports=c},function(e,t,i){"use strict";var n=i(0),r=function e(t,i,r){if(i){var o=i.indexOf("."),s=i,a=null;-1!==o&&(s=i.slice(0,o),a=i.slice(o+1));var c=t[s];if(null!==c&&void 0!==c)if(a||"string"!=typeof c&&"number"!=typeof c)if(n(c))for(var l=0,u=c.length;l<u;l+=1)e(c[l],a,r);else a&&e(c,a,r);else r.push(c.toString())}else r.push(t);return r};e.exports=function(e,t){return r(e,t,[])}},function(e,t,i){"use strict";e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=[],n=-1,r=-1,o=0,s=e.length;o<s;o+=1){var a=e[o];a&&-1===n?n=o:a||-1===n||(r=o-1,r-n+1>=t&&i.push([n,r]),n=-1)}return e[o-1]&&o-n>=t&&i.push([n,o-1]),i}},function(e,t,i){"use strict";e.exports=function(e){for(var t={},i=e.length,n=0;n<i;n+=1)t[e.charAt(n)]=0;for(var r=0;r<i;r+=1)t[e.charAt(r)]|=1<<i-r-1;return t}},function(e,t,i){"use strict";var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,r=new RegExp(t.replace(n,"\\$&").replace(i,"|")),o=e.match(r),s=!!o,a=[];if(s)for(var c=0,l=o.length;c<l;c+=1){var u=o[c];a.push([e.indexOf(u),u.length-1])}return{score:s?.5:1,isMatch:s,matchedIndices:a}}},function(e,t,i){"use strict";e.exports=function(e,t){var i=t.errors,n=void 0===i?0:i,r=t.currentLocation,o=void 0===r?0:r,s=t.expectedLocation,a=void 0===s?0:s,c=t.distance,l=void 0===c?100:c,u=n/e.length,h=Math.abs(a-o);return l?u+h/l:h?1:u}},function(e,t,i){"use strict";var n=i(6),r=i(3);e.exports=function(e,t,i,o){for(var s=o.location,a=void 0===s?0:s,c=o.distance,l=void 0===c?100:c,u=o.threshold,h=void 0===u?.6:u,d=o.findAllMatches,f=void 0!==d&&d,p=o.minMatchCharLength,v=void 0===p?1:p,m=a,g=e.length,_=h,y=e.indexOf(t,m),b=t.length,E=[],I=0;I<g;I+=1)E[I]=0;if(-1!==y){var S=n(t,{errors:0,currentLocation:y,expectedLocation:m,distance:l});if(_=Math.min(S,_),-1!==(y=e.lastIndexOf(t,m+b))){var C=n(t,{errors:0,currentLocation:y,expectedLocation:m,distance:l});_=Math.min(C,_)}}y=-1;for(var w=[],k=1,T=b+g,O=1<<b-1,A=0;A<b;A+=1){for(var L=0,x=T;L<x;){n(t,{errors:A,currentLocation:m+x,expectedLocation:m,distance:l})<=_?L=x:T=x,x=Math.floor((T-L)/2+L)}T=x;var P=Math.max(1,m-x+1),D=f?g:Math.min(m+x,g)+b,N=Array(D+2);N[D+1]=(1<<A)-1;for(var F=D;F>=P;F-=1){var M=F-1,j=i[e.charAt(M)];if(j&&(E[M]=1),N[F]=(N[F+1]<<1|1)&j,0!==A&&(N[F]|=(w[F+1]|w[F])<<1|1|w[F+1]),N[F]&O&&(k=n(t,{errors:A,currentLocation:M,expectedLocation:m,distance:l}))<=_){if(_=k,(y=M)<=m)break;P=Math.max(1,2*m-y)}}if(n(t,{errors:A+1,currentLocation:m,expectedLocation:m,distance:l})>_)break;w=N}return{isMatch:y>=0,score:0===k?.001:k,matchedIndices:r(E,v)}}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(1),s=i(2),a=i(0),c=function(){function e(t,i){var r=i.location,o=void 0===r?0:r,a=i.distance,c=void 0===a?100:a,l=i.threshold,u=void 0===l?.6:l,h=i.maxPatternLength,d=void 0===h?32:h,f=i.caseSensitive,p=void 0!==f&&f,v=i.tokenSeparator,m=void 0===v?/ +/g:v,g=i.findAllMatches,_=void 0!==g&&g,y=i.minMatchCharLength,b=void 0===y?1:y,E=i.id,I=void 0===E?null:E,S=i.keys,C=void 0===S?[]:S,w=i.shouldSort,k=void 0===w||w,T=i.getFn,O=void 0===T?s:T,A=i.sortFn,L=void 0===A?function(e,t){return e.score-t.score}:A,x=i.tokenize,P=void 0!==x&&x,D=i.matchAllTokens,N=void 0!==D&&D,F=i.includeMatches,M=void 0!==F&&F,j=i.includeScore,K=void 0!==j&&j,V=i.verbose,B=void 0!==V&&V;n(this,e),this.options={location:o,distance:c,threshold:u,maxPatternLength:d,isCaseSensitive:p,tokenSeparator:m,findAllMatches:_,minMatchCharLength:b,id:I,keys:C,includeMatches:M,includeScore:K,shouldSort:k,getFn:O,sortFn:L,verbose:B,tokenize:P,matchAllTokens:N},this.setCollection(t)}return r(e,[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"search",value:function(e){this._log('---------\nSearch pattern: "'+e+'"');var t=this._prepareSearchers(e),i=t.tokenSearchers,n=t.fullSearcher,r=this._search(i,n),o=r.weights,s=r.results;return this._computeScore(o,s),this.options.shouldSort&&this._sort(s),this._format(s)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var i=e.split(this.options.tokenSeparator),n=0,r=i.length;n<r;n+=1)t.push(new o(i[n],this.options));return{tokenSearchers:t,fullSearcher:new o(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],i=this.list,n={},r=[];if("string"==typeof i[0]){for(var o=0,s=i.length;o<s;o+=1)this._analyze({key:"",value:i[o],record:o,index:o},{resultMap:n,results:r,tokenSearchers:e,fullSearcher:t});return{weights:null,results:r}}for(var a={},c=0,l=i.length;c<l;c+=1)for(var u=i[c],h=0,d=this.options.keys.length;h<d;h+=1){var f=this.options.keys[h];if("string"!=typeof f){if(a[f.name]={weight:1-f.weight||1},f.weight<=0||f.weight>1)throw new Error("Key weight has to be > 0 and <= 1");f=f.name}else a[f]={weight:1};this._analyze({key:f,value:this.options.getFn(u,f),record:u,index:c},{resultMap:n,results:r,tokenSearchers:e,fullSearcher:t})}return{weights:a,results:r}}},{key:"_analyze",value:function(e,t){var i=e.key,n=e.arrayIndex,r=void 0===n?-1:n,o=e.value,s=e.record,c=e.index,l=t.tokenSearchers,u=void 0===l?[]:l,h=t.fullSearcher,d=void 0===h?[]:h,f=t.resultMap,p=void 0===f?{}:f,v=t.results,m=void 0===v?[]:v;if(void 0!==o&&null!==o){var g=!1,_=-1,y=0;if("string"==typeof o){this._log("\nKey: "+(""===i?"-":i));var b=d.search(o);if(this._log('Full text: "'+o+'", score: '+b.score),this.options.tokenize){for(var E=o.split(this.options.tokenSeparator),I=[],S=0;S<u.length;S+=1){var C=u[S];this._log('\nPattern: "'+C.pattern+'"');for(var w=!1,k=0;k<E.length;k+=1){var T=E[k],O=C.search(T),A={};O.isMatch?(A[T]=O.score,g=!0,w=!0,I.push(O.score)):(A[T]=1,this.options.matchAllTokens||I.push(1)),this._log('Token: "'+T+'", score: '+A[T])}w&&(y+=1)}_=I[0];for(var L=I.length,x=1;x<L;x+=1)_+=I[x];_/=L,this._log("Token score average:",_)}var P=b.score;_>-1&&(P=(P+_)/2),this._log("Score average:",P);var D=!this.options.tokenize||!this.options.matchAllTokens||y>=u.length;if(this._log("\nCheck Matches: "+D),(g||b.isMatch)&&D){var N=p[c];N?N.output.push({key:i,arrayIndex:r,value:o,score:P,matchedIndices:b.matchedIndices}):(p[c]={item:s,output:[{key:i,arrayIndex:r,value:o,score:P,matchedIndices:b.matchedIndices}]},m.push(p[c]))}}else if(a(o))for(var F=0,M=o.length;F<M;F+=1)this._analyze({key:i,arrayIndex:F,value:o[F],record:s,index:c},{resultMap:p,results:m,tokenSearchers:u,fullSearcher:d})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var i=0,n=t.length;i<n;i+=1){for(var r=t[i].output,o=r.length,s=0,a=1,c=0;c<o;c+=1){var l=e?e[r[c].key].weight:1,u=1===l?r[c].score:r[c].score||.001,h=u*l;1!==l?a=Math.min(a,h):(r[c].nScore=h,s+=h)}t[i].score=1===a?s/o:a,this._log(t[i])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];this._log("\n\nOutput:\n\n",JSON.stringify(e));var i=[];this.options.includeMatches&&i.push(function(e,t){var i=e.output;t.matches=[];for(var n=0,r=i.length;n<r;n+=1){var o=i[n];if(0!==o.matchedIndices.length){var s={indices:o.matchedIndices,value:o.value};o.key&&(s.key=o.key),o.hasOwnProperty("arrayIndex")&&o.arrayIndex>-1&&(s.arrayIndex=o.arrayIndex),t.matches.push(s)}}}),this.options.includeScore&&i.push(function(e,t){t.score=e.score});for(var n=0,r=e.length;n<r;n+=1){var o=e[n];if(this.options.id&&(o.item=this.options.getFn(o.item,this.options.id)[0]),i.length){for(var s={item:o.item},a=0,c=i.length;a<c;a+=1)i[a](o,s);t.push(s)}else t.push(o.item)}return t}},{key:"_log",value:function(){if(this.options.verbose){var e;(e=console).log.apply(e,arguments)}}}]),e}();e.exports=c}])})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(0),s=function(){function e(t){var i=t.element,r=t.classNames;if(n(this,e),Object.assign(this,{element:i,classNames:r}),!(0,o.isElement)(i))throw new TypeError("Invalid element passed");this.isDisabled=!1}return r(e,[{key:"conceal",value:function(){this.element.classList.add(this.classNames.input,this.classNames.hiddenState),this.element.tabIndex="-1";var e=this.element.getAttribute("style");e&&this.element.setAttribute("data-choice-orig-style",e),this.element.setAttribute("aria-hidden","true"),this.element.setAttribute("data-choice","active")}},{key:"reveal",value:function(){this.element.classList.remove(this.classNames.input,this.classNames.hiddenState),this.element.removeAttribute("tabindex");var e=this.element.getAttribute("data-choice-orig-style");e?(this.element.removeAttribute("data-choice-orig-style"),this.element.setAttribute("style",e)):this.element.removeAttribute("style"),this.element.removeAttribute("aria-hidden"),this.element.removeAttribute("data-choice"),this.element.value=this.element.value}},{key:"enable",value:function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1}},{key:"disable",value:function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0}},{key:"triggerEvent",value:function(e,t){(0,o.dispatchEvent)(this.element,e,t)}},{key:"value",get:function(){return this.element.value}}]),e}();t.default=s},function(e,t,i){e.exports=i(43)},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();i(5);var s=i(1),a=i(0),c=i(11),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-choice]",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),(0,a.isType)("String",t)){var r=Array.from(document.querySelectorAll(t));if(r.length>1)return this._generateInstances(r,i)}var o=(0,a.isType)("String",t)?document.querySelector(t):t;"active"===o.getAttribute("data-choice")&&console.warn("Trying to initialise Choices on element already initialised");var s=e._generateConfig(i);switch(o.type){case"select-multiple":return new c.ChoicesSelectMultiple(o,s);case"select-one":return new c.ChoicesSelectOne(o,s);case"text":return new c.ChoicesInput(o,s);default:throw new TypeError("Unrecognised element passed")}}return o(e,[{key:"_generateInstances",value:function(t,i){return t.reduce(function(t,n){return t.push(new e(n,i)),t},[this])}}],[{key:"_generateConfig",value:function(t){var i=r({},s.DEFAULT_CONFIG,{items:[],choices:[],classNames:s.DEFAULT_CLASSNAMES,sortFn:a.sortByAlpha});return(0,a.extend)(i,e.userDefaults,t)}}]),e}();e.exports=l},function(e,t,i){i(45),i(61),e.exports=i(4).Array.from},function(e,t,i){"use strict";var n=i(46)(!0);i(47)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},function(e,t,i){var n=i(13),r=i(14);e.exports=function(e){return function(t,i){var o,s,a=String(r(t)),c=n(i),l=a.length;return c<0||c>=l?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},function(e,t,i){"use strict";var n=i(25),r=i(26),o=i(29),s=i(6),a=i(18),c=i(51),l=i(36),u=i(60),h=i(2)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,i,p,v,m,g){c(i,t,p);var _,y,b,E=function(e){if(!d&&e in w)return w[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},I=t+" Iterator",S="values"==v,C=!1,w=e.prototype,k=w[h]||w["@@iterator"]||v&&w[v],T=k||E(v),O=v?S?E("entries"):T:void 0,A="Array"==t?w.entries||k:k;if(A&&(b=u(A.call(new e)))!==Object.prototype&&b.next&&(l(b,I,!0),n||"function"==typeof b[h]||s(b,h,f)),S&&k&&"values"!==k.name&&(C=!0,T=function(){return k.call(this)}),n&&!g||!d&&!C&&w[h]||s(w,h,T),a[t]=T,a[I]=f,v)if(_={values:S?T:E("values"),keys:m?T:E("keys"),entries:O},g)for(y in _)y in w||o(w,y,_[y]);else r(r.P+r.F*(d||C),t,_);return _}},function(e,t,i){e.exports=!i(9)&&!i(27)(function(){return 7!=Object.defineProperty(i(28)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var n=i(15);e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){"use strict";var n=i(52),r=i(16),o=i(36),s={};i(6)(s,i(2)("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=n(s,{next:r(1,i)}),o(e,t+" Iterator")}},function(e,t,i){var n=i(8),r=i(53),o=i(35),s=i(19)("IE_PROTO"),a=function(){},c=function(){var e,t=i(28)("iframe"),n=o.length;for(t.style.display="none",i(59).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c.prototype[o[n]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(a.prototype=n(e),i=new a,a.prototype=null,i[s]=e):i=c(),void 0===t?i:r(i,t)}},function(e,t,i){var n=i(7),r=i(8),o=i(54);e.exports=i(9)?Object.defineProperties:function(e,t){r(e);for(var i,s=o(t),a=s.length,c=0;a>c;)n.f(e,i=s[c++],t[i]);return e}},function(e,t,i){var n=i(55),r=i(35);e.exports=Object.keys||function(e){return n(e,r)}},function(e,t,i){var n=i(10),r=i(31),o=i(57)(!1),s=i(19)("IE_PROTO");e.exports=function(e,t){var i,a=r(e),c=0,l=[];for(i in a)i!=s&&n(a,i)&&l.push(i);for(;t.length>c;)n(a,i=t[c++])&&(~o(l,i)||l.push(i));return l}},function(e,t,i){var n=i(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,i){var n=i(31),r=i(33),o=i(58);e.exports=function(e){return function(t,i,s){var a,c=n(t),l=r(c.length),u=o(s,l);if(e&&i!=i){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===i)return e||u||0;return!e&&-1}}},function(e,t,i){var n=i(13),r=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?r(e+t,0):o(e,t)}},function(e,t,i){var n=i(3).document;e.exports=n&&n.documentElement},function(e,t,i){var n=i(10),r=i(37),o=i(19)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,i){"use strict";var n=i(30),r=i(26),o=i(37),s=i(62),a=i(63),c=i(33),l=i(64),u=i(65);r(r.S+r.F*!i(67)(function(e){Array.from(e)}),"Array",{from:function(e){var t,i,r,h,d=o(e),f="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=0,_=u(d);if(m&&(v=n(v,p>2?arguments[2]:void 0,2)),void 0==_||f==Array&&a(_))for(t=c(d.length),i=new f(t);t>g;g++)l(i,g,m?v(d[g],g):d[g]);else for(h=_.call(d),i=new f;!(r=h.next()).done;g++)l(i,g,m?s(h,v,[r.value,g],!0):r.value);return i.length=g,i}})},function(e,t,i){var n=i(8);e.exports=function(e,t,i,r){try{return r?t(n(i)[0],i[1]):t(i)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,i){var n=i(18),r=i(2)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[r]===e)}},function(e,t,i){"use strict";var n=i(7),r=i(16);e.exports=function(e,t,i){t in e?n.f(e,t,r(0,i)):e[t]=i}},function(e,t,i){var n=i(66),r=i(2)("iterator"),o=i(18);e.exports=i(4).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[n(e)]}},function(e,t,i){var n=i(32),r=i(2)("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,i,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=s(t=Object(e),r))?i:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,i){var n=i(2)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:i=!0}},o[n]=function(){return s},e(o)}catch(e){}return i}},function(e,t){try{var i=new window.CustomEvent("test");if(i.preventDefault(),!0!==i.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var n=function(e,t){var i,n;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},i=document.createEvent("CustomEvent"),i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n=i.preventDefault,i.preventDefault=function(){n.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},i};n.prototype=window.Event.prototype,window.CustomEvent=n}},function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();i(5);var a=i(20),c=function(e){return e&&e.__esModule?e:{default:e}}(a),l=i(11),u=i(1),h=i(12),d=i(21),f=i(22),p=i(23),v=i(24),m=i(0),g=function(){function e(t,i){o(this,e),this.initialised=!1,this.config=i,["auto","always"].includes(this.config.renderSelectedChoices)||(this.config.renderSelectedChoices="auto"),this._isSelectElement=this._isSelectOneElement||this._isSelectMultipleElement,this.passedElement=new l.WrappedInput({element:t,classNames:this.config.classNames,delimiter:this.config.delimiter}),this._store=new c.default(this.render),this._initialState={},this._currentState={},this._prevState={},this._currentValue="",this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=(0,m.generateId)(this.passedElement.element,"choices-"),this._direction=this.passedElement.element.getAttribute("dir")||"ltr",this._idNames={itemChoice:"item-choice"},this._presetItems=this.config.items,this.passedElement.value&&(this._presetItems=this._presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.render=this.render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this.init()}return s(e,[{key:"init",value:function(){if(!this.initialised){this._createTemplates(),this._createElements(),this._createStructure(),this._initialState=(0,m.cloneObject)(this._store.state),this._store.subscribe(this.render),this.render(),this._addEventListeners(),this.initialised=!0;var e=this.config.callbackOnInit;e&&(0,m.isType)("Function",e)&&e.call(this)}}},{key:"destroy",value:function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this.clearStore(),this.config.templates=null,this.initialised=!1)}},{key:"enable",value:function(){return this.initialised?(this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this):this}},{key:"disable",value:function(){return this.initialised?(this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this):this}},{key:"render",value:function(){this._currentState=this._store.state;var e=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,t=this._currentState.items!==this._prevState.items;e&&(t&&this._renderItems(),this._prevState=this._currentState)}},{key:"highlightItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return this;var i=e.id,n=e.groupId,r=void 0===n?-1:n,o=e.value,s=void 0===o?"":o,a=e.label,c=void 0===a?"":a,l=r>=0?this._store.getGroupById(r):null;return this._store.dispatch((0,f.highlightItem)(i,!0)),t&&this.passedElement.triggerEvent(u.EVENTS.highlightItem,{id:i,value:s,label:c,groupValue:l&&l.value?l.value:null}),this}},{key:"unhighlightItem",value:function(e){if(!e)return this;var t=e.id,i=e.groupId,n=void 0===i?-1:i,r=e.value,o=void 0===r?"":r,s=e.label,a=void 0===s?"":s,c=n>=0?this._store.getGroupById(n):null;return this._store.dispatch((0,f.highlightItem)(t,!1)),this.passedElement.triggerEvent(u.EVENTS.highlightItem,{id:t,value:o,label:a,groupValue:c&&c.value?c.value:null}),this}},{key:"highlightAll",value:function(){var e=this;return this._store.items.forEach(function(t){return e.highlightItem(t)}),this}},{key:"unhighlightAll",value:function(){var e=this;return this._store.items.forEach(function(t){return e.unhighlightItem(t)}),this}},{key:"removeActiveItemsByValue",value:function(e){var t=this;return this._store.activeItems.filter(function(t){return t.value===e}).forEach(function(e){return t._removeItem(e)}),this}},{key:"removeActiveItems",value:function(e){var t=this;return this._store.activeItems.filter(function(t){return t.id!==e}).forEach(function(e){return t._removeItem(e)}),this}},{key:"removeHighlightedItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._store.highlightedActiveItems.forEach(function(i){e._removeItem(i),t&&e._triggerChange(i.value)}),this}},{key:"showDropdown",value:function(e){var t=this;return this.dropdown.isActive?this:(requestAnimationFrame(function(){t.dropdown.show(),t.containerOuter.open(t.dropdown.distanceFromTopWindow()),e||t.input.focus(),t.passedElement.triggerEvent(u.EVENTS.showDropdown,{})}),this)}},{key:"hideDropdown",value:function(e){var t=this;return this.dropdown.isActive?(requestAnimationFrame(function(){t.dropdown.hide(),t.containerOuter.close(),e||(t.input.removeActiveDescendant(),t.input.blur()),t.passedElement.triggerEvent(u.EVENTS.hideDropdown,{})}),this):this}},{key:"toggleDropdown",value:function(){return this.dropdown.isActive?this.hideDropdown():this.showDropdown(),this}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._store.activeItems.reduce(function(t,i){var n=e?i.value:i;return t.push(n),t},[])}},{key:"setValue",value:function(e){var t=this;return this.initialised?([].concat(r(e)).forEach(function(e){return t._setChoiceOrItem(e)}),this):this}},{key:"clearStore",value:function(){return this._store.dispatch((0,v.clearAll)()),this}},{key:"clearInput",value:function(){return this.input.clear(),this}},{key:"_createItemsFragment",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.config,r=n.shouldSortItems,o=n.sortFn,s=n.removeItemButton,a=i||document.createDocumentFragment();r&&e.sort(o),this.passedElement.value=e;var c=function(e){var i=t._getTemplate("item",e,s);a.appendChild(i)};return e.forEach(function(e){return c(e)}),a}},{key:"_triggerChange",value:function(e){void 0!==e&&null!==e&&this.passedElement.triggerEvent(u.EVENTS.change,{value:e})}},{key:"_handleButtonAction",value:function(e,t){if(e&&t&&this.config.removeItems&&this.config.removeItemButton){var i=t.parentNode.getAttribute("data-id"),n=e.find(function(e){return e.id===parseInt(i,10)});this._removeItem(n),this._triggerChange(n.value)}}},{key:"_handleItemAction",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t&&this.config.removeItems){var r=t.getAttribute("data-id");e.forEach(function(e){e.id!==parseInt(r,10)||e.highlighted?!n&&e.highlighted&&i.unhighlightItem(e):i.highlightItem(e)}),this.input.focus()}}},{key:"_handleChoiceAction",value:function(e,t){if(e&&t){var i=t.getAttribute("data-id"),n=this._store.getChoiceById(i),r=e[0]&&e[0].keyCode?e[0].keyCode:null;if(n.keyCode=r,this.passedElement.triggerEvent(u.EVENTS.choice,{choice:n}),n&&!n.selected&&!n.disabled){this._canAddItem(e,n.value).response&&(this._addItem({value:n.value,label:n.label,choiceId:n.id,groupId:n.groupId,customProperties:n.customProperties,placeholder:n.placeholder,keyCode:n.keyCode}),this._triggerChange(n.value))}this.clearInput()}}},{key:"_handleBackspace",value:function(e){if(this.config.removeItems&&e){var t=e[e.length-1],i=e.some(function(e){return e.highlighted});this.config.editItems&&!i&&t?(this.input.value=t.value,this.input.setWidth(),this._removeItem(t),this._triggerChange(t.value)):(i||this.highlightItem(t,!1),this.removeHighlightedItems(!0))}}},{key:"_handleLoadingState",value:function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?(this.containerOuter.removeLoadingState(),this.input.placeholder=this._placeholderValue||""):(this.containerOuter.addLoadingState(),this.input.placeholder=this.config.loadingText)}},{key:"_canAddItem",value:function(e,t){var i=!0,n=(0,m.isType)("Function",this.config.addItemText)?this.config.addItemText(t):this.config.addItemText,r=(0,m.existsInArray)(e,t);return this.config.maxItemCount>0&&this.config.maxItemCount<=e.length&&(i=!1,n=(0,m.isType)("Function",this.config.maxItemText)?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),this.config.regexFilter&&this.config.addItems&&i&&(i=(0,m.regexFilter)(t,this.config.regexFilter)),!this.config.duplicateItemsAllowed&&r&&i&&(i=!1,n=(0,m.isType)("Function",this.config.uniqueItemText)?this.config.uniqueItemText(t):this.config.uniqueItemText),{response:i,notice:n}}},{key:"_addEventListeners",value:function(){document.addEventListener("keyup",this._onKeyUp),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("click",this._onClick),document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousedown",this._onMouseDown),document.addEventListener("mouseover",this._onMouseOver),this.input.element.addEventListener("focus",this._onFocus),this.input.element.addEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset),this.input.addEventListeners()}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("click",this._onClick),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mouseover",this._onMouseOver),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()}},{key:"_onKeyDown",value:function(e){var t,i=this,r=e.target,o=e.keyCode,s=e.ctrlKey,a=e.metaKey;if(r===this.input.element||this.containerOuter.element.contains(r)){var c=this._store.activeItems,l=this.input.isFocussed,h=this.dropdown.isActive,d=this.itemList.hasChildren,f=u.KEY_CODES.BACK_KEY,p=u.KEY_CODES.DELETE_KEY,v=u.KEY_CODES.ENTER_KEY,g=u.KEY_CODES.A_KEY,_=u.KEY_CODES.ESC_KEY,y=u.KEY_CODES.UP_KEY,b=u.KEY_CODES.DOWN_KEY,E=u.KEY_CODES.PAGE_UP_KEY,I=u.KEY_CODES.PAGE_DOWN_KEY,S=s||a,C=function(){S&&d&&i.config.removeItems&&!i.input.value&&i.input.element===document.activeElement&&i.highlightAll()},w=function(){if(r.value){var t=i.input.value;i._canAddItem(c,t).response&&(i.hideDropdown(!0),i._addItem({value:t}),i._triggerChange(t),i.clearInput())}if(r.hasAttribute("data-button")&&(i._handleButtonAction(c,r),e.preventDefault()),h){e.preventDefault();var n=i.dropdown.getChild("."+i.config.classNames.highlightedState);n&&(c[0]&&(c[0].keyCode=v),i._handleChoiceAction(c,n))}},k=function(){h&&(i.hideDropdown(!0),i.containerOuter.focus())},T=function(){if(h){i.showDropdown();var t=o===b||o===I?1:-1,n=a||o===I||o===E,r=void 0;if(n)r=t>0?Array.from(i.dropdown.element.querySelectorAll("[data-choice-selectable]")).pop():i.dropdown.element.querySelector("[data-choice-selectable]");else{var s=i.dropdown.element.querySelector("."+i.config.classNames.highlightedState);r=s?(0,m.getAdjacentEl)(s,"[data-choice-selectable]",t):i.dropdown.element.querySelector("[data-choice-selectable]")}r&&((0,m.isScrolledIntoView)(r,i.choiceList.element,t)||i.choiceList.scrollToChoice(r,t),i._highlightChoice(r)),e.preventDefault()}},O=function(){l&&!r.value&&(i._handleBackspace(c),e.preventDefault())},A=(t={},n(t,g,C),n(t,v,w),n(t,_,k),n(t,y,T),n(t,E,T),n(t,b,T),n(t,I,T),n(t,p,O),n(t,f,O),t);A[o]&&A[o]()}}},{key:"_onKeyUp",value:function(e){if(e.target===this.input.element){var t=this.input.value,i=this._store.activeItems,n=this._canAddItem(i,t);if(t){if(n.notice){var r=this._getTemplate("notice",n.notice);this.dropdown.element.innerHTML=r.outerHTML}!0===n.response?this.showDropdown(!0):n.notice||this.hideDropdown(!0)}else this.hideDropdown(!0)}}},{key:"_onTouchMove",value:function(){!0===this._wasTap&&(this._wasTap=!1)}},{key:"_onTouchEnd",value:function(e){var t=e.target||e.touches[0].target;if(!0===this._wasTap&&this.containerOuter.element.contains(t)){(t===this.containerOuter.element||t===this.containerInner.element)&&this.input.focus(),e.stopPropagation()}this._wasTap=!0}},{key:"_onMouseDown",value:function(e){var t=e.target,i=e.shiftKey;if(t===this.choiceList&&(0,m.isIE11)()&&(this._isScrollingOnIe=!0),this.containerOuter.element.contains(t)&&t!==this.input.element){var n=this._store.activeItems,r=i,o=(0,m.findAncestorByAttrName)(t,"data-button"),s=(0,m.findAncestorByAttrName)(t,"data-item"),a=(0,m.findAncestorByAttrName)(t,"data-choice");o?this._handleButtonAction(n,o):s?this._handleItemAction(n,s,r):a&&this._handleChoiceAction(n,a),e.preventDefault()}}},{key:"_onMouseOver",value:function(e){var t=e.target;(t===this.dropdown||this.dropdown.element.contains(t))&&t.hasAttribute("data-choice")&&this._highlightChoice(t)}},{key:"_onClick",value:function(e){var t=e.target;if(this.containerOuter.element.contains(t))this.dropdown.isActive||document.activeElement===this.input.element||this.input.focus();else{this._store.highlightedActiveItems&&this.unhighlightAll(),this.containerOuter.removeFocusState(),this.hideDropdown(!0)}}},{key:"_onFocus",value:function(e){e.target===this.input.element&&this.containerOuter.addFocusState()}},{key:"_onBlur",value:function(e){var t=e.target;if(this.containerOuter.element.contains(t)&&!this._isScrollingOnIe){var i=this._store.activeItems,n=i.some(function(e){return e.highlighted});t===this.input.element&&(this.containerOuter.removeFocusState(),n&&this.unhighlightAll(),this.hideDropdown(!0))}else this._isScrollingOnIe=!1,this.input.element.focus()}},{key:"_onFormReset",value:function(){this._store.dispatch((0,v.resetTo)(this._initialState))}},{key:"_highlightChoice",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(i.length){var n=t;Array.from(this.dropdown.element.querySelectorAll("."+this.config.classNames.highlightedState)).forEach(function(t){t.classList.remove(e.config.classNames.highlightedState),t.setAttribute("aria-selected","false")}),n?this._highlightPosition=i.indexOf(n):(n=i.length>this._highlightPosition?i[this._highlightPosition]:i[i.length-1])||(n=i[0]),n.classList.add(this.config.classNames.highlightedState),n.setAttribute("aria-selected","true"),this.dropdown.isActive&&(this.input.setActiveDescendant(n.id),this.containerOuter.setActiveDescendant(n.id))}}},{key:"_addItem",value:function(e){var t=e.value,i=e.label,n=void 0===i?null:i,r=e.choiceId,o=void 0===r?-1:r,s=e.groupId,a=void 0===s?-1:s,c=e.customProperties,l=void 0===c?null:c,h=e.placeholder,d=void 0!==h&&h,p=e.keyCode,v=void 0===p?null:p,g=(0,m.isType)("String",t)?t.trim():t,_=v,y=l,b=this._store.items,E=n||g,I=parseInt(o,10)||-1,S=a>=0?this._store.getGroupById(a):null,C=b?b.length+1:1;return this.config.prependValue&&(g=this.config.prependValue+g.toString()),this.config.appendValue&&(g+=this.config.appendValue.toString()),this._store.dispatch((0,f.addItem)({value:g,label:E,id:C,choiceId:I,groupId:a,customProperties:l,placeholder:d,keyCode:_})),S&&S.value?this.passedElement.triggerEvent(u.EVENTS.addItem,{id:C,value:g,label:E,customProperties:y,groupValue:S.value,keyCode:_}):this.passedElement.triggerEvent(u.EVENTS.addItem,{id:C,value:g,label:E,customProperties:y,keyCode:_}),this}},{key:"_removeItem",value:function(e){if(!e||!(0,m.isType)("Object",e))return this;var t=e.id,i=e.value,n=e.label,r=e.choiceId,o=e.groupId,s=o>=0?this._store.getGroupById(o):null;return this._store.dispatch((0,f.removeItem)(t,r)),s&&s.value?this.passedElement.triggerEvent(u.EVENTS.removeItem,{id:t,value:i,label:n,groupValue:s.value}):this.passedElement.triggerEvent(u.EVENTS.removeItem,{id:t,value:i,label:n}),this}},{key:"_addChoice",value:function(e){var t=e.value,i=e.label,n=void 0===i?null:i,r=e.isSelected,o=void 0!==r&&r,s=e.isDisabled,a=void 0!==s&&s,c=e.groupId,l=void 0===c?-1:c,u=e.customProperties,h=void 0===u?null:u,f=e.placeholder,p=void 0!==f&&f,v=e.keyCode,m=void 0===v?null:v;if(void 0!==t&&null!==t){var g=this._store.choices,_=n||t,y=g?g.length+1:1,b=this._baseId+"-"+this._idNames.itemChoice+"-"+y;this._store.dispatch((0,d.addChoice)({value:t,label:_,id:y,groupId:l,disabled:a,elementId:b,customProperties:h,placeholder:p,keyCode:m})),o&&this._addItem({value:t,label:_,choiceId:y,customProperties:h,placeholder:p,keyCode:m})}}},{key:"_clearChoices",value:function(){this._store.dispatch((0,d.clearChoices)())}},{key:"_addGroup",value:function(e){var t=this,i=e.group,n=e.id,r=e.valueKey,o=void 0===r?"value":r,s=e.labelKey,a=void 0===s?"label":s,c=(0,m.isType)("Object",i)?i.choices:Array.from(i.getElementsByTagName("OPTION")),l=n||Math.floor((new Date).valueOf()*Math.random()),u=!!i.disabled&&i.disabled;if(c){this._store.dispatch((0,p.addGroup)(i.label,l,!0,u));var h=function(e){var i=e.disabled||e.parentNode&&e.parentNode.disabled;t._addChoice({value:e[o],label:(0,m.isType)("Object",e)?e[a]:e.innerHTML,isSelected:e.selected,isDisabled:i,groupId:l,customProperties:e.customProperties,placeholder:e.placeholder})};c.forEach(h)}else this._store.dispatch((0,p.addGroup)(i.label,i.id,!1,i.disabled))}},{key:"_getTemplate",value:function(e){var t;if(!e)return null;for(var i=this.config,n=i.templates,r=i.classNames,o=arguments.length,s=Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return(t=n[e]).call.apply(t,[this,r].concat(s))}},{key:"_createTemplates",value:function(){var e=this.config.callbackOnCreateTemplates,t={};e&&(0,m.isType)("Function",e)&&(t=e.call(this,m.strToEl)),this.config.templates=(0,m.extend)(h.TEMPLATES,t)}},{key:"_createElements",value:function(){this.containerOuter=new l.Container({element:this._getTemplate("containerOuter",this._direction,!1,"text"),classNames:this.config.classNames,type:"text",position:this.config.position}),this.containerInner=new l.Container({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:"text",position:this.config.position}),this.input=new l.Input({element:this._getTemplate("input"),classNames:this.config.classNames,type:"text"}),this.choiceList=new l.List({element:this._getTemplate("choiceList",!1)}),this.itemList=new l.List({element:this._getTemplate("itemList",!1)}),this.dropdown=new l.Dropdown({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:"text"})}},{key:"_createStructure",value:function(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this._placeholderValue&&(this.input.placeholder=this._placeholderValue,this.input.setWidth(!0)),this.config.addItems||this.disable(),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this.containerInner.element.appendChild(this.input.element),this._addPredefinedItems()}},{key:"_addPredefinedItems",value:function(){var e=this,t=function(t){var i=(0,m.getType)(t);"Object"===i&&t.value?e._addItem({value:t.value,label:t.label,choiceId:t.id,customProperties:t.customProperties,placeholder:t.placeholder}):"String"===i&&e._addItem({value:t})};this._presetItems.forEach(function(e){return t(e)})}},{key:"_setChoiceOrItem",value:function(e){var t=this,i=(0,m.getType)(e).toLowerCase();({object:function(){e.value&&t._addItem({value:e.value,label:e.label,choiceId:e.id,customProperties:e.customProperties,placeholder:e.placeholder})},string:function(){t._addItem({value:e})}})[i]()}},{key:"_generatePlaceholderValue",value:function(){return!!this.config.placeholder&&(this.config.placeholderValue||this.passedElement.element.getAttribute("placeholder"))}},{key:"_renderItems",value:function(){var e=this._store.activeItems||[];if(this.itemList.clear(),e.length){var t=this._createItemsFragment(e);t.childNodes&&this.itemList.append(t)}}}]),e}();t.default=g},function(e,t,i){"use strict";(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.a=i}).call(t,i(39))},function(e,t,i){e.exports=i(72)},function(e,t,i){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=i(74),s=function(e){return e&&e.__esModule?e:{default:e}}(o);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var a=(0,s.default)(r);t.default=a}).call(t,i(39),i(73)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";function n(e){var t,i=e.Symbol;return"function"==typeof i?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(38),o=i(76),s=n(o),a=i(77),c=n(a),l=i(78),u=n(l),h=i(0),d=(0,r.combineReducers)({items:s.default,groups:c.default,choices:u.default}),f=function(e,t){var i=e;if("CLEAR_ALL"===t.type)i=void 0;else if("RESET_TO"===t.type)return(0,h.cloneObject)(t.state);return d(i,t)};t.default=f},function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"ADD_ITEM":return[].concat(n(e),[{id:t.id,choiceId:t.choiceId,groupId:t.groupId,value:t.value,label:t.label,active:!0,highlighted:!1,customProperties:t.customProperties,placeholder:t.placeholder||!1,keyCode:null}]).map(function(e){var t=e;return t.highlighted=!1,t});case"REMOVE_ITEM":return e.map(function(e){var i=e;return i.id===t.id&&(i.active=!1),i});case"HIGHLIGHT_ITEM":return e.map(function(e){var i=e;return i.id===t.id&&(i.highlighted=t.highlighted),i});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=t.defaultState=[]},function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"ADD_GROUP":return[].concat(n(e),[{id:t.id,value:t.value,active:t.active,disabled:t.disabled}]);case"CLEAR_CHOICES":return[];default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=t.defaultState=[]},function(e,t,i){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"ADD_CHOICE":return[].concat(n(e),[{id:t.id,elementId:t.elementId,groupId:t.groupId,value:t.value,label:t.label||t.value,disabled:t.disabled||!1,selected:!1,active:!0,score:9999,customProperties:t.customProperties,placeholder:t.placeholder||!1,keyCode:null}]);case"ADD_ITEM":return t.activateOptions?e.map(function(e){var i=e;return i.active=t.active,i}):t.choiceId>-1?e.map(function(e){var i=e;return i.id===parseInt(t.choiceId,10)&&(i.selected=!0),i}):e;case"REMOVE_ITEM":return t.choiceId>-1?e.map(function(e){var i=e;return i.id===parseInt(t.choiceId,10)&&(i.selected=!1),i}):e;case"FILTER_CHOICES":return e.map(function(e){var i=e;return i.active=t.results.some(function(e){var t=e.item,n=e.score;return t.id===i.id&&(i.score=n,!0)}),i});case"ACTIVATE_CHOICES":return e.map(function(e){var i=e;return i.active=t.active,i});case"CLEAR_CHOICES":return o;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=t.defaultState=[]},function(e,t,i){var n,r;!function(){"use strict";function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n))e.push(i.apply(null,n));else if("object"===r)for(var s in n)o.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=i:(n=[],void 0!==(r=function(){return i}.apply(t,n))&&(e.exports=r))}()},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(40),l=n(c);i(5);var u=i(20),h=n(u),d=i(11),f=i(1),p=i(12),v=i(21),m=i(22),g=i(23),_=i(24),y=i(0),b=function(){function e(t,i){s(this,e),this.initialised=!1,this.config=i,["auto","always"].includes(this.config.renderSelectedChoices)||(this.config.renderSelectedChoices="auto"),this.passedElement=new d.WrappedSelect({element:t,classNames:this.config.classNames}),!0===this.config.shouldSortItems&&(this.config.silent||console.warn("shouldSortElements: Type of passed element is 'select-one', falling back to false."),this.config.shouldSortItems),this._store=new h.default(this.render),this._initialState={},this._currentState={},this._prevState={},this._currentValue="",this._canSearch=this.config.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=null,this._baseId=(0,y.generateId)(this.passedElement.element,"choices-"),this._direction=this.passedElement.element.getAttribute("dir")||"ltr",this._idNames={itemChoice:"item-choice"},this._presetChoices=this.config.choices,this._presetItems=this.config.items,this.passedElement.value&&(this._presetItems=this._presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.render=this.render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this.init()}return a(e,[{key:"init",value:function(){if(!this.initialised){this._createTemplates(),this._createElements(),this._createStructure(),this._initialState=(0,y.cloneObject)(this._store.state),this._store.subscribe(this.render),this.render(),this._addEventListeners(),this.initialised=!0;var e=this.config.callbackOnInit;e&&(0,y.isType)("Function",e)&&e.call(this)}}},{key:"destroy",value:function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this.passedElement.options=this._presetChoices,this.clearStore(),this.config.templates=null,this.initialised=!1)}},{key:"enable",value:function(){return this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this}},{key:"disable",value:function(){return this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this}},{key:"render",value:function(){this._currentState=this._store.state;var e=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,t=this._currentState.items!==this._prevState.items;e&&(this._renderChoices(),t&&this._renderItems(),this._prevState=this._currentState)}},{key:"removeActiveItems",value:function(e){var t=this;return this._store.activeItems.filter(function(t){return t.id!==e}).forEach(function(e){return t._removeItem(e)}),this}},{key:"showDropdown",value:function(e){var t=this;return this.dropdown.isActive?this:(requestAnimationFrame(function(){t.dropdown.show(),t.containerOuter.open(t.dropdown.distanceFromTopWindow()),!e&&t._canSearch&&t.input.focus(),t.passedElement.triggerEvent(f.EVENTS.showDropdown,{})}),this)}},{key:"hideDropdown",value:function(e){var t=this;return this.dropdown.isActive?(requestAnimationFrame(function(){t.dropdown.hide(),t.containerOuter.close(),!e&&t._canSearch&&(t.input.removeActiveDescendant(),t.input.blur()),t.passedElement.triggerEvent(f.EVENTS.hideDropdown,{})}),this):this}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._store.activeItems.reduce(function(t,i){var n=e?i.value:i;return t.push(n),t},[])[0]}},{key:"setValue",value:function(e){var t=this;return[].concat(o(e)).forEach(function(e){return t._setChoiceOrItem(e)}),this}},{key:"setChoiceByValue",value:function(e){var t=this;return((0,y.isType)("Array",e)?e:[e]).forEach(function(e){return t._findAndSelectChoiceByValue(e)}),this}},{key:"setChoices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.length||!t)return this;r&&this._clearChoices(),this.containerOuter.removeLoadingState();var o=function(e){e.choices?i._addGroup({group:e,id:e.id||null,valueKey:t,labelKey:n}):i._addChoice({value:e[t],label:e[n],isSelected:e.selected,isDisabled:e.disabled,customProperties:e.customProperties,placeholder:e.placeholder})};return e.forEach(o),this}},{key:"clearStore",value:function(){return this._store.dispatch((0,_.clearAll)()),this}},{key:"clearInput",value:function(){return this.input.clear(!1),this._canSearch&&(this._isSearching=!1,this._store.dispatch((0,v.activateChoices)(!0))),this}},{key:"ajax",value:function(e){var t=this;return e?(requestAnimationFrame(function(){return t._handleLoadingState(!0)}),e(this._ajaxCallback()),this):this}},{key:"_createGroupsFragment",value:function(e,t,i){var n=this,r=i||document.createDocumentFragment(),o=function(e){return t.filter(function(t){return t.groupId===e.id})};return this.config.shouldSort&&e.sort(this.config.sortFn),e.forEach(function(e){var t=o(e);if(t.length>=1){var i=n._getTemplate("choiceGroup",e);r.appendChild(i),n._createChoicesFragment(t,r,!0)}}),r}},{key:"_createChoicesFragment",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t||document.createDocumentFragment(),s=this.config,a=s.renderSelectedChoices,c=s.searchResultLimit,l=s.renderChoiceLimit,u=this._isSearching?y.sortByScore:this.config.sortFn,h=e,d=h.reduce(function(e,t){return t.placeholder?e.placeholderChoices.push(t):e.normalChoices.push(t),e},{placeholderChoices:[],normalChoices:[]}),f=d.placeholderChoices,p=d.normalChoices;(this.config.shouldSort||this._isSearching)&&p.sort(u);var v=h.length,m=[].concat(o(f),o(p));this._isSearching?v=c:l>0&&!n&&(v=l);for(var g=0;g<v;g+=1)m[g]&&function(e){if("auto"!==a||!e.selected){var t=i._getTemplate("choice",e,i.config.itemSelectText);r.appendChild(t)}}(m[g]);return r}},{key:"_createItemsFragment",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.config.removeItemButton,r=i||document.createDocumentFragment();this.passedElement.options=e;var o=function(e){var i=t._getTemplate("item",e,n);r.appendChild(i)};return e.forEach(function(e){return o(e)}),r}},{key:"_triggerChange",value:function(e){void 0!==e&&null!==e&&this.passedElement.triggerEvent(f.EVENTS.change,{value:e})}},{key:"_selectPlaceholderChoice",value:function(){var e=this._store.placeholderChoice;e&&(this._addItem({value:e.value,label:e.label,choiceId:e.id,groupId:e.groupId,placeholder:e.placeholder}),this._triggerChange(e.value))}},{key:"_handleButtonAction",value:function(e,t){if(e&&t&&this.config.removeItems&&this.config.removeItemButton){var i=t.parentNode.getAttribute("data-id"),n=e.find(function(e){return e.id===parseInt(i,10)});this._removeItem(n),this._triggerChange(n.value),this._selectPlaceholderChoice()}}},{key:"_handleChoiceAction",value:function(e,t){if(e&&t){var i=t.getAttribute("data-id"),n=this._store.getChoiceById(i),r=e[0]&&e[0].keyCode?e[0].keyCode:null,o=this.dropdown.isActive;if(n.keyCode=r,this.passedElement.triggerEvent(f.EVENTS.choice,{choice:n}),n&&!n.selected&&!n.disabled){this._canAddItem(e,n.value).response&&(this._addItem({value:n.value,label:n.label,choiceId:n.id,groupId:n.groupId,customProperties:n.customProperties,placeholder:n.placeholder,keyCode:n.keyCode}),this._triggerChange(n.value))}this.clearInput(),o&&(this.hideDropdown(!0),this.containerOuter.focus())}}},{key:"_handleLoadingState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.itemList.getChild("."+this.config.classNames.placeholder);e?(this.containerOuter.addLoadingState(),t?t.innerHTML=this.config.loadingText:(t=this._getTemplate("placeholder",this.config.loadingText),this.itemList.append(t))):(this.containerOuter.removeLoadingState(),t.innerHTML=this._placeholderValue||"")}},{key:"_canAddItem",value:function(e,t){return{response:!0,notice:(0,y.isType)("Function",this.config.addItemText)?this.config.addItemText(t):this.config.addItemText}}},{key:"_ajaxCallback",value:function(){var e=this;return function(t,i,n){if(t&&i){var r=(0,y.isType)("Object",t)?[t]:t;r&&(0,y.isType)("Array",r)&&r.length?(e._handleLoadingState(!1),r.forEach(function(t){t.choices?e._addGroup({group:t,id:t.id||null,valueKey:i,labelKey:n}):e._addChoice({value:(0,y.fetchFromObject)(t,i),label:(0,y.fetchFromObject)(t,n),isSelected:t.selected,isDisabled:t.disabled,customProperties:t.customProperties,placeholder:t.placeholder})}),e._selectPlaceholderChoice()):e._handleLoadingState(!1)}}}},{key:"_searchChoices",value:function(e){var t=(0,y.isType)("String",e)?e.trim():e,i=(0,y.isType)("String",this._currentValue)?this._currentValue.trim():this._currentValue;if(t.length<1&&t===i+" ")return 0;var n=this._store.searchableChoices,r=t,s=[].concat(o(this.config.searchFields)),a=Object.assign(this.config.fuseOptions,{keys:s}),c=new l.default(n,a),u=c.search(r);return this._currentValue=t,this._highlightPosition=0,this._isSearching=!0,this._store.dispatch((0,v.filterChoices)(u)),u.length}},{key:"_handleSearch",value:function(e){if(e&&this.input.isFocussed){var t=this._store.choices,i=this.config,n=i.searchFloor,r=i.searchChoices,o=t.some(function(e){return!e.active});if(e&&e.length>=n){var s=r?this._searchChoices(e):0;this.passedElement.triggerEvent(f.EVENTS.search,{value:e,resultCount:s})}else o&&(this._isSearching=!1,this._store.dispatch((0,v.activateChoices)(!0)))}}},{key:"_addEventListeners",value:function(){document.addEventListener("keyup",this._onKeyUp),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("click",this._onClick),document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousedown",this._onMouseDown),document.addEventListener("mouseover",this._onMouseOver),this.containerOuter.element.addEventListener("focus",this._onFocus),this.containerOuter.element.addEventListener("blur",this._onBlur),this.input.element.addEventListener("focus",this._onFocus),this.input.element.addEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset),this.input.addEventListeners()}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("click",this._onClick),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mouseover",this._onMouseOver),this.containerOuter.element.removeEventListener("focus",this._onFocus),this.containerOuter.element.removeEventListener("blur",this._onBlur),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()}},{key:"_onKeyDown",value:function(e){var t,i=this,n=e.target,o=e.keyCode,s=e.ctrlKey,a=e.metaKey;if(n===this.input.element||this.containerOuter.element.contains(n)){var c=this._store.activeItems,l=this.dropdown.isActive,u=this.itemList.hasChildren,h=String.fromCharCode(o),d=f.KEY_CODES.ENTER_KEY,p=f.KEY_CODES.A_KEY,v=f.KEY_CODES.ESC_KEY,m=f.KEY_CODES.UP_KEY,g=f.KEY_CODES.DOWN_KEY,_=f.KEY_CODES.PAGE_UP_KEY,b=f.KEY_CODES.PAGE_DOWN_KEY,E=s||a;/[a-zA-Z0-9-_ ]/.test(h)&&this.showDropdown();var I=function(){E&&u&&(i._canSearch=!1,i.config.removeItems&&!i.input.value&&i.input.element===document.activeElement&&i.highlightAll())},S=function(){if(n.hasAttribute("data-button")&&(i._handleButtonAction(c,n),e.preventDefault()),l){e.preventDefault();var t=i.dropdown.getChild("."+i.config.classNames.highlightedState);t&&(c[0]&&(c[0].keyCode=d),i._handleChoiceAction(c,t))}else i.showDropdown(),e.preventDefault()},C=function(){l&&(i.hideDropdown(!0),i.containerOuter.focus())},w=function(){if(l){i.showDropdown(),i._canSearch=!1;var t=o===g||o===b?1:-1,n=a||o===b||o===_,r=void 0;if(n)r=t>0?Array.from(i.dropdown.element.querySelectorAll("[data-choice-selectable]")).pop():i.dropdown.element.querySelector("[data-choice-selectable]");else{var s=i.dropdown.element.querySelector("."+i.config.classNames.highlightedState);r=s?(0,y.getAdjacentEl)(s,"[data-choice-selectable]",t):i.dropdown.element.querySelector("[data-choice-selectable]")}r&&((0,y.isScrolledIntoView)(r,i.choiceList.element,t)||i.choiceList.scrollToChoice(r,t),i._highlightChoice(r)),e.preventDefault()}},k=(t={},r(t,p,I),r(t,d,S),r(t,v,C),r(t,m,w),r(t,_,w),r(t,g,w),r(t,b,w),t);k[o]&&k[o]()}}},{key:"_onKeyUp",value:function(e){var t=e.target,i=e.keyCode;if(t===this.input.element){var n=this.input.value,r=this._store.activeItems,o=this._canAddItem(r,n),s=f.KEY_CODES.BACK_KEY,a=f.KEY_CODES.DELETE_KEY;i!==s&&i!==a||t.value?this._canSearch&&o.response&&this._handleSearch(this.input.value):this._isSearching&&(this._isSearching=!1,this._store.dispatch((0,v.activateChoices)(!0))),this._canSearch=this.config.searchEnabled}}},{key:"_onTouchMove",value:function(){!0===this._wasTap&&(this._wasTap=!1)}},{key:"_onTouchEnd",value:function(e){var t=e.target||e.touches[0].target;!0===this._wasTap&&this.containerOuter.element.contains(t)&&e.stopPropagation(),this._wasTap=!0}},{key:"_onMouseDown",value:function(e){var t=e.target;if(t===this.choiceList&&(0,y.isIE11)()&&(this._isScrollingOnIe=!0),this.containerOuter.element.contains(t)&&t!==this.input.element){var i=this._store.activeItems,n=(0,y.findAncestorByAttrName)(t,"data-button"),r=(0,y.findAncestorByAttrName)(t,"data-choice");n?this._handleButtonAction(i,n):r&&this._handleChoiceAction(i,r),e.preventDefault()}}},{key:"_onMouseOver",value:function(e){var t=e.target;(t===this.dropdown||this.dropdown.element.contains(t))&&t.hasAttribute("data-choice")&&this._highlightChoice(t)}},{key:"_onClick",value:function(e){var t=e.target;this.containerOuter.element.contains(t)?this.dropdown.isActive?t===this.input.element||this.dropdown.element.contains(t)||this.hideDropdown():(this.showDropdown(),this.containerOuter.focus()):(this.containerOuter.removeFocusState(),this.hideDropdown(!0))}},{key:"_onFocus",value:function(e){var t=e.target;this.containerOuter.element.contains(t)&&(this.containerOuter.addFocusState(),t===this.input.element&&this.showDropdown(!0))}},{key:"_onBlur",value:function(e){var t=e.target;this.containerOuter.element.contains(t)&&!this._isScrollingOnIe?(this.containerOuter.removeFocusState(),(t===this.input.element||t===this.containerOuter.element&&!this._canSearch)&&this.hideDropdown(!0)):(this._isScrollingOnIe=!1,this.input.element.focus())}},{key:"_onFormReset",value:function(){this._store.dispatch((0,_.resetTo)(this._initialState))}},{key:"_highlightChoice",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(i.length){var n=t;Array.from(this.dropdown.element.querySelectorAll("."+this.config.classNames.highlightedState)).forEach(function(t){t.classList.remove(e.config.classNames.highlightedState),t.setAttribute("aria-selected","false")}),n?this._highlightPosition=i.indexOf(n):(n=i.length>this._highlightPosition?i[this._highlightPosition]:i[i.length-1])||(n=i[0]),n.classList.add(this.config.classNames.highlightedState),n.setAttribute("aria-selected","true"),this.dropdown.isActive&&(this.input.setActiveDescendant(n.id),this.containerOuter.setActiveDescendant(n.id))}}},{key:"_addItem",value:function(e){var t=e.value,i=e.label,n=void 0===i?null:i,r=e.choiceId,o=void 0===r?-1:r,s=e.groupId,a=void 0===s?-1:s,c=e.customProperties,l=void 0===c?null:c,u=e.placeholder,h=void 0!==u&&u,d=e.keyCode,p=void 0===d?null:d,v=(0,y.isType)("String",t)?t.trim():t,g=p,_=l,b=this._store.items,E=n||v,I=parseInt(o,10)||-1,S=a>=0?this._store.getGroupById(a):null,C=b?b.length+1:1;return this.config.prependValue&&(v=this.config.prependValue+v.toString()),this.config.appendValue&&(v+=this.config.appendValue.toString()),this._store.dispatch((0,m.addItem)({value:v,label:E,id:C,choiceId:I,groupId:a,customProperties:l,placeholder:h,keyCode:g})),this.removeActiveItems(C),S&&S.value?this.passedElement.triggerEvent(f.EVENTS.addItem,{id:C,value:v,label:E,customProperties:_,groupValue:S.value,keyCode:g}):this.passedElement.triggerEvent(f.EVENTS.addItem,{id:C,value:v,label:E,customProperties:_,keyCode:g}),this}},{key:"_removeItem",value:function(e){if(!e||!(0,y.isType)("Object",e))return this;var t=e.id,i=e.value,n=e.label,r=e.choiceId,o=e.groupId,s=o>=0?this._store.getGroupById(o):null;return this._store.dispatch((0,m.removeItem)(t,r)),s&&s.value?this.passedElement.triggerEvent(f.EVENTS.removeItem,{id:t,value:i,label:n,groupValue:s.value}):this.passedElement.triggerEvent(f.EVENTS.removeItem,{id:t,value:i,label:n}),this}},{key:"_addChoice",value:function(e){var t=e.value,i=e.label,n=void 0===i?null:i,r=e.isSelected,o=void 0!==r&&r,s=e.isDisabled,a=void 0!==s&&s,c=e.groupId,l=void 0===c?-1:c,u=e.customProperties,h=void 0===u?null:u,d=e.placeholder,f=void 0!==d&&d,p=e.keyCode,m=void 0===p?null:p;if(void 0!==t&&null!==t){var g=this._store.choices,_=n||t,y=g?g.length+1:1,b=this._baseId+"-"+this._idNames.itemChoice+"-"+y;this._store.dispatch((0,v.addChoice)({value:t,label:_,id:y,groupId:l,disabled:a,elementId:b,customProperties:h,placeholder:f,keyCode:m})),o&&this._addItem({value:t,label:_,choiceId:y,customProperties:h,placeholder:f,keyCode:m})}}},{key:"_clearChoices",value:function(){this._store.dispatch((0,v.clearChoices)())}},{key:"_addGroup",value:function(e){var t=this,i=e.group,n=e.id,r=e.valueKey,o=void 0===r?"value":r,s=e.labelKey,a=void 0===s?"label":s,c=(0,y.isType)("Object",i)?i.choices:Array.from(i.getElementsByTagName("OPTION")),l=n||Math.floor((new Date).valueOf()*Math.random()),u=!!i.disabled&&i.disabled;if(c){this._store.dispatch((0,g.addGroup)(i.label,l,!0,u));var h=function(e){var i=e.disabled||e.parentNode&&e.parentNode.disabled;t._addChoice({value:e[o],label:(0,y.isType)("Object",e)?e[a]:e.innerHTML,isSelected:e.selected,isDisabled:i,groupId:l,customProperties:e.customProperties,placeholder:e.placeholder})};c.forEach(h)}else this._store.dispatch((0,g.addGroup)(i.label,i.id,!1,i.disabled))}},{key:"_getTemplate",value:function(e){var t;if(!e)return null;for(var i=this.config,n=i.templates,r=i.classNames,o=arguments.length,s=Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return(t=n[e]).call.apply(t,[this,r].concat(s))}},{key:"_createTemplates",value:function(){var e=this.config.callbackOnCreateTemplates,t={};e&&(0,y.isType)("Function",e)&&(t=e.call(this,y.strToEl)),this.config.templates=(0,y.extend)(p.TEMPLATES,t)}},{key:"_createElements",value:function(){this.containerOuter=new d.Container({element:this._getTemplate("containerOuter",this._direction,this.config.searchEnabled,"select-one"),classNames:this.config.classNames,type:"select-one",position:this.config.position}),this.containerInner=new d.Container({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:"select-one",position:this.config.position}),this.input=new d.Input({element:this._getTemplate("input"),classNames:this.config.classNames,type:"select-one"}),this.choiceList=new d.List({element:this._getTemplate("choiceList",!0)}),this.itemList=new d.List({element:this._getTemplate("itemList",!0)}),this.dropdown=new d.Dropdown({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:"select-one"})}},{key:"_createStructure",value:function(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this.input.placeholder=this.config.searchPlaceholderValue||"",this.config.addItems||this.disable(),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this.dropdown.element.appendChild(this.choiceList.element),this.dropdown.element.insertBefore(this.input.element,this.dropdown.element.firstChild),this._addPredefinedChoices()}},{key:"_addPredefinedChoices",value:function(){var e=this,t=this.passedElement.optionGroups;if(this._highlightPosition=0,this._isSearching=!1,t&&t.length){var i=this.passedElement.placeholderOption;i&&"SELECT"===i.parentNode.tagName&&this._addChoice({value:i.value,label:i.innerHTML,isSelected:i.selected,isDisabled:i.disabled,placeholder:!0}),t.forEach(function(t){return e._addGroup({group:t,id:t.id||null})})}else{var n=this.passedElement.options,r=this.config.sortFn,o=this._presetChoices;n.forEach(function(e){o.push({value:e.value,label:e.innerHTML,selected:e.selected,disabled:e.disabled||e.parentNode.disabled,placeholder:e.hasAttribute("placeholder")})}),this.config.shouldSort&&o.sort(r);var s=o.some(function(e){return e.selected}),a=function(t,i){var n=t.value,r=t.label,o=t.customProperties,a=t.placeholder;if(t.choices)e._addGroup({group:t,id:t.id||null});else{var c=!s&&0===i,l=!!c||t.selected,u=!c&&t.disabled;e._addChoice({value:n,label:r,isSelected:l,isDisabled:u,customProperties:o,placeholder:a})}};o.forEach(function(e,t){return a(e,t)})}}},{key:"_addPredefinedItems",value:function(){var e=this,t=function(t){var i=(0,y.getType)(t);"Object"===i&&t.value?e._addItem({value:t.value,label:t.label,choiceId:t.id,customProperties:t.customProperties,placeholder:t.placeholder}):"String"===i&&e._addItem({value:t})};this._presetItems.forEach(function(e){return t(e)})}},{key:"_setChoiceOrItem",value:function(e){var t=this,i=(0,y.getType)(e).toLowerCase();({object:function(){e.value&&t._addChoice({value:e.value,label:e.label,isSelected:!0,isDisabled:!1,customProperties:e.customProperties,placeholder:e.placeholder})},string:function(){t._addChoice({value:e,label:e,isSelected:!0,isDisabled:!1})}})[i]()}},{key:"_findAndSelectChoiceByValue",value:function(e){var t=this,i=this._store.choices,n=i.find(function(i){return t.config.itemComparer(i.value,e)});n&&!n.selected&&this._addItem({value:n.value,label:n.label,id:n.id,groupId:n.groupId,customProperties:n.customProperties,placeholder:n.placeholder,keyCode:n.keyCode})}},{key:"_renderChoices",value:function(){var e=this,t=this._store,i=t.activeGroups,n=t.activeChoices,r=document.createDocumentFragment();if(this.choiceList.clear(),this.config.resetScrollPosition&&requestAnimationFrame(function(){return e.choiceList.scrollToTop()}),i.length>=1&&!this._isSearching){var o=n.filter(function(e){return!0===e.placeholder&&-1===e.groupId});o.length>=1&&(r=this._createChoicesFragment(o,r)),r=this._createGroupsFragment(i,n,r)}else n.length>=1&&(r=this._createChoicesFragment(n,r));if(r.childNodes&&r.childNodes.length>0){var s=this._store.activeItems,a=this._canAddItem(s,this.input.value);a.response?(this.choiceList.append(r),this._highlightChoice()):this.choiceList.append(this._getTemplate("notice",a.notice))}else{var c=void 0,l=void 0;this._isSearching?(l=(0,y.isType)("Function",this.config.noResultsText)?this.config.noResultsText():this.config.noResultsText,c=this._getTemplate("notice",l,"no-results")):(l=(0,y.isType)("Function",this.config.noChoicesText)?this.config.noChoicesText():this.config.noChoicesText,c=this._getTemplate("notice",l,"no-choices")),this.choiceList.append(c)}}},{key:"_renderItems",value:function(){var e=this._store.activeItems||[];if(this.itemList.clear(),e.length){var t=this._createItemsFragment(e);t.childNodes&&this.itemList.append(t)}}}]),e}();t.default=b},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(40),l=n(c);i(5);var u=i(20),h=n(u),d=i(11),f=i(1),p=i(12),v=i(21),m=i(22),g=i(23),_=i(24),y=i(0),b=function(){function e(t,i){s(this,e),this.initialised=!1,this.config=i,["auto","always"].includes(this.config.renderSelectedChoices)||(this.config.renderSelectedChoices="auto"),this.passedElement=new d.WrappedSelect({element:t,classNames:this.config.classNames}),this._store=new h.default(this.render),this._initialState={},this._currentState={},this._prevState={},this._currentValue="",this._canSearch=this.config.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=(0,y.generateId)(this.passedElement.element,"choices-"),this._direction=this.passedElement.element.getAttribute("dir")||"ltr",this._idNames={itemChoice:"item-choice"},this._presetChoices=this.config.choices,this._presetItems=this.config.items,this.passedElement.value&&(this._presetItems=this._presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.render=this.render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this.init()}return a(e,[{key:"init",value:function(){if(!this.initialised){this._createTemplates(),this._createElements(),this._createStructure(),this._initialState=(0,y.cloneObject)(this._store.state),this._store.subscribe(this.render),this.render(),this._addEventListeners(),this.initialised=!0;var e=this.config.callbackOnInit;e&&(0,y.isType)("Function",e)&&e.call(this)}}},{key:"destroy",value:function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this.passedElement.options=this._presetChoices,this.clearStore(),this.config.templates=null,this.initialised=!1)}},{key:"enable",value:function(){return this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this}},{key:"disable",value:function(){return this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this}},{key:"render",value:function(){this._currentState=this._store.state;var e=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,t=this._currentState.items!==this._prevState.items;e&&(this._renderChoices(),t&&this._renderItems(),this._prevState=this._currentState)}},{key:"highlightItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return this;var i=e.id,n=e.groupId,r=void 0===n?-1:n,o=e.value,s=void 0===o?"":o,a=e.label,c=void 0===a?"":a,l=r>=0?this._store.getGroupById(r):null;return this._store.dispatch((0,m.highlightItem)(i,!0)),t&&this.passedElement.triggerEvent(f.EVENTS.highlightItem,{id:i,value:s,label:c,groupValue:l&&l.value?l.value:null}),this}},{key:"unhighlightItem",value:function(e){if(!e)return this;var t=e.id,i=e.groupId,n=void 0===i?-1:i,r=e.value,o=void 0===r?"":r,s=e.label,a=void 0===s?"":s,c=n>=0?this._store.getGroupById(n):null;return this._store.dispatch((0,m.highlightItem)(t,!1)),this.passedElement.triggerEvent(f.EVENTS.highlightItem,{id:t,value:o,label:a,groupValue:c&&c.value?c.value:null}),this}},{key:"highlightAll",value:function(){var e=this;return this._store.items.forEach(function(t){return e.highlightItem(t)}),this}},{key:"unhighlightAll",value:function(){var e=this;return this._store.items.forEach(function(t){return e.unhighlightItem(t)}),this}},{key:"removeActiveItemsByValue",value:function(e){var t=this;return this._store.activeItems.filter(function(t){return t.value===e}).forEach(function(e){return t._removeItem(e)}),this}},{key:"removeActiveItems",value:function(e){var t=this;return this._store.activeItems.filter(function(t){return t.id!==e}).forEach(function(e){return t._removeItem(e)}),this}},{key:"removeHighlightedItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._store.highlightedActiveItems.forEach(function(i){e._removeItem(i),t&&e._triggerChange(i.value)}),this}},{key:"showDropdown",value:function(e){var t=this;return this.dropdown.isActive?this:(requestAnimationFrame(function(){t.dropdown.show(),t.containerOuter.open(t.dropdown.distanceFromTopWindow()),!e&&t._canSearch&&t.input.focus(),t.passedElement.triggerEvent(f.EVENTS.showDropdown,{})}),this)}},{key:"hideDropdown",value:function(e){var t=this;return this.dropdown.isActive?(requestAnimationFrame(function(){t.dropdown.hide(),t.containerOuter.close(),!e&&t._canSearch&&(t.input.removeActiveDescendant(),t.input.blur()),t.passedElement.triggerEvent(f.EVENTS.hideDropdown,{})}),this):this}},{key:"toggleDropdown",value:function(){return this.dropdown.isActive?this.hideDropdown():this.showDropdown(),this}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._store.activeItems.reduce(function(t,i){var n=e?i.value:i;return t.push(n),t},[])}},{key:"setValue",value:function(e){var t=this;return[].concat(o(e)).forEach(function(e){return t._setChoiceOrItem(e)}),this}},{key:"setChoiceByValue",value:function(e){var t=this;return((0,y.isType)("Array",e)?e:[e]).forEach(function(e){return t._findAndSelectChoiceByValue(e)}),this}},{key:"setChoices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.length||!t)return this;r&&this._clearChoices(),this.containerOuter.removeLoadingState();var o=function(e){e.choices?i._addGroup({group:e,id:e.id||null,valueKey:t,labelKey:n}):i._addChoice({value:e[t],label:e[n],isSelected:e.selected,isDisabled:e.disabled,customProperties:e.customProperties,placeholder:e.placeholder})};return e.forEach(o),this}},{key:"clearStore",value:function(){return this._store.dispatch((0,_.clearAll)()),this}},{key:"clearInput",value:function(){return this.input.clear(),this._canSearch&&(this._isSearching=!1,this._store.dispatch((0,v.activateChoices)(!0))),this}},{key:"ajax",value:function(e){var t=this;return e?(requestAnimationFrame(function(){return t._handleLoadingState(!0)}),e(this._ajaxCallback()),this):this}},{key:"_createGroupsFragment",value:function(e,t,i){var n=this,r=i||document.createDocumentFragment(),o=function(e){return t.filter(function(t){return t.groupId===e.id&&("always"===n.config.renderSelectedChoices||!t.selected)})};return this.config.shouldSort&&e.sort(this.config.sortFn),e.forEach(function(e){var t=o(e);if(t.length>=1){var i=n._getTemplate("choiceGroup",e);r.appendChild(i),n._createChoicesFragment(t,r,!0)}}),r}},{key:"_createChoicesFragment",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t||document.createDocumentFragment(),s=this.config,a=s.renderSelectedChoices,c=s.searchResultLimit,l=s.renderChoiceLimit,u=this._isSearching?y.sortByScore:this.config.sortFn,h=e;"auto"===a&&(h=e.filter(function(e){return!e.selected}));var d=h.reduce(function(e,t){return t.placeholder?e.placeholderChoices.push(t):e.normalChoices.push(t),e},{placeholderChoices:[],normalChoices:[]}),f=d.placeholderChoices,p=d.normalChoices;(this.config.shouldSort||this._isSearching)&&p.sort(u);var v=h.length,m=[].concat(o(f),o(p));this._isSearching?v=c:l>0&&!n&&(v=l);for(var g=0;g<v;g+=1)m[g]&&function(e){if("auto"!==a||!e.selected){var t=i._getTemplate("choice",e,i.config.itemSelectText);r.appendChild(t)}}(m[g]);return r}},{key:"_createItemsFragment",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.config,r=n.shouldSortItems,o=n.sortFn,s=n.removeItemButton,a=i||document.createDocumentFragment();r&&e.sort(o),this.passedElement.options=e;var c=function(e){var i=t._getTemplate("item",e,s);a.appendChild(i)};return e.forEach(function(e){return c(e)}),a}},{key:"_triggerChange",value:function(e){void 0!==e&&null!==e&&this.passedElement.triggerEvent(f.EVENTS.change,{value:e})}},{key:"_selectPlaceholderChoice",value:function(){var e=this._store.placeholderChoice;e&&(this._addItem({value:e.value,label:e.label,choiceId:e.id,groupId:e.groupId,placeholder:e.placeholder}),this._triggerChange(e.value))}},{key:"_handleButtonAction",value:function(e,t){if(e&&t&&this.config.removeItems&&this.config.removeItemButton){var i=t.parentNode.getAttribute("data-id"),n=e.find(function(e){return e.id===parseInt(i,10)});this._removeItem(n),this._triggerChange(n.value)}}},{key:"_handleItemAction",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t&&this.config.removeItems){var r=t.getAttribute("data-id");e.forEach(function(e){e.id!==parseInt(r,10)||e.highlighted?!n&&e.highlighted&&i.unhighlightItem(e):i.highlightItem(e)}),this.input.focus()}}},{key:"_handleChoiceAction",value:function(e,t){if(e&&t){var i=t.getAttribute("data-id"),n=this._store.getChoiceById(i),r=e[0]&&e[0].keyCode?e[0].keyCode:null;if(n.keyCode=r,this.passedElement.triggerEvent(f.EVENTS.choice,{choice:n}),n&&!n.selected&&!n.disabled){this._canAddItem(e,n.value).response&&(this._addItem({value:n.value,label:n.label,choiceId:n.id,groupId:n.groupId,customProperties:n.customProperties,placeholder:n.placeholder,keyCode:n.keyCode}),this._triggerChange(n.value))}this.clearInput()}}},{key:"_handleBackspace",value:function(e){if(this.config.removeItems&&e){var t=e[e.length-1],i=e.some(function(e){return e.highlighted});this.config.editItems&&!i&&t?(this.input.value=t.value,this.input.setWidth(),this._removeItem(t),this._triggerChange(t.value)):(i||this.highlightItem(t,!1),this.removeHighlightedItems(!0))}}},{key:"_handleLoadingState",value:function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?(this.containerOuter.removeLoadingState(),this.input.placeholder=this._placeholderValue||""):(this.containerOuter.addLoadingState(),this.input.placeholder=this.config.loadingText)}},{key:"_canAddItem",value:function(e,t){var i=!0,n=(0,y.isType)("Function",this.config.addItemText)?this.config.addItemText(t):this.config.addItemText,r=(0,y.existsInArray)(e,t);return this.config.maxItemCount>0&&this.config.maxItemCount<=e.length&&(i=!1,n=(0,y.isType)("Function",this.config.maxItemText)?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),!this.config.duplicateItemsAllowed&&r&&i&&(i=!1,n=(0,y.isType)("Function",this.config.uniqueItemText)?this.config.uniqueItemText(t):this.config.uniqueItemText),{response:i,notice:n}}},{key:"_ajaxCallback",value:function(){var e=this;return function(t,i,n){if(t&&i){var r=(0,y.isType)("Object",t)?[t]:t;r&&(0,y.isType)("Array",r)&&r.length?(e._handleLoadingState(!1),r.forEach(function(t){t.choices?e._addGroup({group:t,id:t.id||null,valueKey:i,labelKey:n}):e._addChoice({value:(0,y.fetchFromObject)(t,i),label:(0,y.fetchFromObject)(t,n),isSelected:t.selected,isDisabled:t.disabled,customProperties:t.customProperties,placeholder:t.placeholder})})):e._handleLoadingState(!1)}}}},{key:"_searchChoices",value:function(e){var t=(0,y.isType)("String",e)?e.trim():e,i=(0,y.isType)("String",this._currentValue)?this._currentValue.trim():this._currentValue;if(t.length<1&&t===i+" ")return 0;var n=this._store.searchableChoices,r=t,s=[].concat(o(this.config.searchFields)),a=Object.assign(this.config.fuseOptions,{keys:s}),c=new l.default(n,a),u=c.search(r);return this._currentValue=t,this._highlightPosition=0,this._isSearching=!0,this._store.dispatch((0,v.filterChoices)(u)),u.length}},{key:"_handleSearch",value:function(e){if(e&&this.input.isFocussed){var t=this._store.choices,i=this.config,n=i.searchFloor,r=i.searchChoices,o=t.some(function(e){return!e.active});if(e&&e.length>=n){var s=r?this._searchChoices(e):0;this.passedElement.triggerEvent(f.EVENTS.search,{value:e,resultCount:s})}else o&&(this._isSearching=!1,this._store.dispatch((0,v.activateChoices)(!0)))}}},{key:"_addEventListeners",value:function(){document.addEventListener("keyup",this._onKeyUp),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("click",this._onClick),document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousedown",this._onMouseDown),document.addEventListener("mouseover",this._onMouseOver),this.input.element.addEventListener("focus",this._onFocus),this.input.element.addEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset),this.input.addEventListeners()}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("click",this._onClick),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mouseover",this._onMouseOver),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()}},{key:"_onKeyDown",value:function(e){var t,i=this,n=e.target,o=e.keyCode,s=e.ctrlKey,a=e.metaKey;if(n===this.input.element||this.containerOuter.element.contains(n)){var c=this._store.activeItems,l=this.input.isFocussed,u=this.dropdown.isActive,h=this.itemList.hasChildren,d=String.fromCharCode(o),p=f.KEY_CODES.BACK_KEY,v=f.KEY_CODES.DELETE_KEY,m=f.KEY_CODES.ENTER_KEY,g=f.KEY_CODES.A_KEY,_=f.KEY_CODES.ESC_KEY,b=f.KEY_CODES.UP_KEY,E=f.KEY_CODES.DOWN_KEY,I=f.KEY_CODES.PAGE_UP_KEY,S=f.KEY_CODES.PAGE_DOWN_KEY,C=s||a;/[a-zA-Z0-9-_ ]/.test(d)&&this.showDropdown();var w=function(){C&&h&&(i._canSearch=!1,i.config.removeItems&&!i.input.value&&i.input.element===document.activeElement&&i.highlightAll())},k=function(){if(n.hasAttribute("data-button")&&(i._handleButtonAction(c,n),e.preventDefault()),u){e.preventDefault();var t=i.dropdown.getChild("."+i.config.classNames.highlightedState);t&&(c[0]&&(c[0].keyCode=m),i._handleChoiceAction(c,t))}},T=function(){u&&(i.hideDropdown(!0),i.containerOuter.focus())},O=function(){if(u){i.showDropdown(),i._canSearch=!1;var t=o===E||o===S?1:-1,n=a||o===S||o===I,r=void 0;if(n)r=t>0?Array.from(i.dropdown.element.querySelectorAll("[data-choice-selectable]")).pop():i.dropdown.element.querySelector("[data-choice-selectable]");else{var s=i.dropdown.element.querySelector("."+i.config.classNames.highlightedState);r=s?(0,y.getAdjacentEl)(s,"[data-choice-selectable]",t):i.dropdown.element.querySelector("[data-choice-selectable]")}r&&((0,y.isScrolledIntoView)(r,i.choiceList.element,t)||i.choiceList.scrollToChoice(r,t),i._highlightChoice(r)),e.preventDefault()}},A=function(){l&&!n.value&&(i._handleBackspace(c),e.preventDefault())},L=(t={},r(t,g,w),r(t,m,k),r(t,_,T),r(t,b,O),r(t,I,O),r(t,E,O),r(t,S,O),r(t,v,A),r(t,p,A),t);L[o]&&L[o]()}}},{key:"_onKeyUp",value:function(e){var t=e.target,i=e.keyCode;if(t===this.input.element){var n=this.input.value,r=this._store.activeItems,o=this._canAddItem(r,n),s=f.KEY_CODES.BACK_KEY,a=f.KEY_CODES.DELETE_KEY;i!==s&&i!==a||t.value?this._canSearch&&o.response&&this._handleSearch(this.input.value):this._isSearching&&(this._isSearching=!1,this._store.dispatch((0,v.activateChoices)(!0))),this._canSearch=this.config.searchEnabled}}},{key:"_onTouchMove",value:function(){!0===this._wasTap&&(this._wasTap=!1)}},{key:"_onTouchEnd",value:function(e){var t=e.target||e.touches[0].target;if(!0===this._wasTap&&this.containerOuter.element.contains(t)){(t===this.containerOuter.element||t===this.containerInner.element)&&this.showDropdown(),e.stopPropagation()}this._wasTap=!0}},{key:"_onMouseDown",value:function(e){var t=e.target,i=e.shiftKey;if(t===this.choiceList&&(0,y.isIE11)()&&(this._isScrollingOnIe=!0),this.containerOuter.element.contains(t)&&t!==this.input.element){var n=this._store.activeItems,r=i,o=(0,y.findAncestorByAttrName)(t,"data-button"),s=(0,y.findAncestorByAttrName)(t,"data-item"),a=(0,y.findAncestorByAttrName)(t,"data-choice");o?this._handleButtonAction(n,o):s?this._handleItemAction(n,s,r):a&&this._handleChoiceAction(n,a),e.preventDefault()}}},{key:"_onMouseOver",value:function(e){var t=e.target;(t===this.dropdown||this.dropdown.element.contains(t))&&t.hasAttribute("data-choice")&&this._highlightChoice(t)}},{key:"_onClick",value:function(e){var t=e.target;if(this.containerOuter.element.contains(t))this.dropdown.isActive||(this.showDropdown(),this.containerOuter.focus());else{this._store.highlightedActiveItems&&this.unhighlightAll(),this.containerOuter.removeFocusState(),this.hideDropdown(!0)}}},{key:"_onFocus",value:function(e){e.target===this.input.element&&(this.showDropdown(!0),this.containerOuter.addFocusState())}},{key:"_onBlur",value:function(e){var t=e.target;if(this.containerOuter.element.contains(t)&&!this._isScrollingOnIe){var i=this._store.activeItems,n=i.some(function(e){return e.highlighted});t===this.input.element&&(this.containerOuter.removeFocusState(),this.hideDropdown(!0),n&&this.unhighlightAll())}else this._isScrollingOnIe=!1,this.input.element.focus()}},{key:"_onFormReset",value:function(){this._store.dispatch((0,_.resetTo)(this._initialState))}},{key:"_highlightChoice",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(i.length){var n=t;Array.from(this.dropdown.element.querySelectorAll("."+this.config.classNames.highlightedState)).forEach(function(t){t.classList.remove(e.config.classNames.highlightedState),t.setAttribute("aria-selected","false")}),n?this._highlightPosition=i.indexOf(n):(n=i.length>this._highlightPosition?i[this._highlightPosition]:i[i.length-1])||(n=i[0]),n.classList.add(this.config.classNames.highlightedState),n.setAttribute("aria-selected","true"),this.dropdown.isActive&&(this.input.setActiveDescendant(n.id),this.containerOuter.setActiveDescendant(n.id))}}},{key:"_addItem",value:function(e){var t=e.value,i=e.label,n=void 0===i?null:i,r=e.choiceId,o=void 0===r?-1:r,s=e.groupId,a=void 0===s?-1:s,c=e.customProperties,l=void 0===c?null:c,u=e.placeholder,h=void 0!==u&&u,d=e.keyCode,p=void 0===d?null:d,v=(0,y.isType)("String",t)?t.trim():t,g=p,_=l,b=this._store.items,E=n||v,I=parseInt(o,10)||-1,S=a>=0?this._store.getGroupById(a):null,C=b?b.length+1:1;return this.config.prependValue&&(v=this.config.prependValue+v.toString()),this.config.appendValue&&(v+=this.config.appendValue.toString()),this._store.dispatch((0,m.addItem)({value:v,label:E,id:C,choiceId:I,groupId:a,customProperties:l,placeholder:h,keyCode:g})),S&&S.value?this.passedElement.triggerEvent(f.EVENTS.addItem,{id:C,value:v,label:E,customProperties:_,groupValue:S.value,keyCode:g}):this.passedElement.triggerEvent(f.EVENTS.addItem,{id:C,value:v,label:E,customProperties:_,keyCode:g}),this}},{key:"_removeItem",value:function(e){if(!e||!(0,y.isType)("Object",e))return this;var t=e.id,i=e.value,n=e.label,r=e.choiceId,o=e.groupId,s=o>=0?this._store.getGroupById(o):null;return this._store.dispatch((0,m.removeItem)(t,r)),s&&s.value?this.passedElement.triggerEvent(f.EVENTS.removeItem,{id:t,value:i,label:n,groupValue:s.value}):this.passedElement.triggerEvent(f.EVENTS.removeItem,{id:t,value:i,label:n}),this}},{key:"_addChoice",value:function(e){var t=e.value,i=e.label,n=void 0===i?null:i,r=e.isSelected,o=void 0!==r&&r,s=e.isDisabled,a=void 0!==s&&s,c=e.groupId,l=void 0===c?-1:c,u=e.customProperties,h=void 0===u?null:u,d=e.placeholder,f=void 0!==d&&d,p=e.keyCode,m=void 0===p?null:p;if(void 0!==t&&null!==t){var g=this._store.choices,_=n||t,y=g?g.length+1:1,b=this._baseId+"-"+this._idNames.itemChoice+"-"+y;this._store.dispatch((0,v.addChoice)({value:t,label:_,id:y,groupId:l,disabled:a,elementId:b,customProperties:h,placeholder:f,keyCode:m})),o&&this._addItem({value:t,label:_,choiceId:y,customProperties:h,placeholder:f,keyCode:m})}}},{key:"_clearChoices",value:function(){this._store.dispatch((0,v.clearChoices)())}},{key:"_addGroup",value:function(e){var t=this,i=e.group,n=e.id,r=e.valueKey,o=void 0===r?"value":r,s=e.labelKey,a=void 0===s?"label":s,c=(0,y.isType)("Object",i)?i.choices:Array.from(i.getElementsByTagName("OPTION")),l=n||Math.floor((new Date).valueOf()*Math.random()),u=!!i.disabled&&i.disabled;if(c){this._store.dispatch((0,g.addGroup)(i.label,l,!0,u));var h=function(e){var i=e.disabled||e.parentNode&&e.parentNode.disabled;t._addChoice({value:e[o],label:(0,y.isType)("Object",e)?e[a]:e.innerHTML,isSelected:e.selected,isDisabled:i,groupId:l,customProperties:e.customProperties,placeholder:e.placeholder})};c.forEach(h)}else this._store.dispatch((0,g.addGroup)(i.label,i.id,!1,i.disabled))}},{key:"_getTemplate",value:function(e){var t;if(!e)return null;for(var i=this.config,n=i.templates,r=i.classNames,o=arguments.length,s=Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return(t=n[e]).call.apply(t,[this,r].concat(s))}},{key:"_createTemplates",value:function(){var e=this.config.callbackOnCreateTemplates,t={};e&&(0,y.isType)("Function",e)&&(t=e.call(this,y.strToEl)),this.config.templates=(0,y.extend)(p.TEMPLATES,t)}},{key:"_createElements",value:function(){this.containerOuter=new d.Container({element:this._getTemplate("containerOuter",this._direction,this.config.searchEnabled,"select-multiple"),classNames:this.config.classNames,type:"select-multiple",position:this.config.position}),this.containerInner=new d.Container({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:"select-multiple",position:this.config.position}),this.input=new d.Input({element:this._getTemplate("input"),classNames:this.config.classNames,type:"select-multiple"}),this.choiceList=new d.List({element:this._getTemplate("choiceList",!1)}),this.itemList=new d.List({element:this._getTemplate("itemList",!1)}),this.dropdown=new d.Dropdown({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:"select-multiple"})}},{key:"_createStructure",value:function(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this._placeholderValue&&(this.input.placeholder=this._placeholderValue,this.input.setWidth(!0)),this.config.addItems||this.disable(),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this.dropdown.element.appendChild(this.choiceList.element),this.containerInner.element.appendChild(this.input.element),this._addPredefinedChoices()}},{key:"_addPredefinedChoices",value:function(){var e=this,t=this.passedElement.optionGroups;if(this._highlightPosition=0,this._isSearching=!1,t&&t.length){var i=this.passedElement.placeholderOption;i&&"SELECT"===i.parentNode.tagName&&this._addChoice({value:i.value,label:i.innerHTML,isSelected:i.selected,isDisabled:i.disabled,placeholder:!0}),t.forEach(function(t){return e._addGroup({group:t,id:t.id||null})})}else{var n=this.passedElement.options,r=this.config.sortFn,o=this._presetChoices;n.forEach(function(e){o.push({value:e.value,label:e.innerHTML,selected:e.selected,disabled:e.disabled||e.parentNode.disabled,placeholder:e.hasAttribute("placeholder")})}),this.config.shouldSort&&o.sort(r);var s=function(t){var i=t.value,n=t.label,r=t.customProperties,o=t.placeholder;if(t.choices)e._addGroup({group:t,id:t.id||null});else{var s=t.selected,a=t.disabled;e._addChoice({value:i,label:n,isSelected:s,isDisabled:a,customProperties:r,placeholder:o})}};o.forEach(function(e,t){return s(e)})}}},{key:"_addPredefinedItems",value:function(){var e=this,t=function(t){var i=(0,y.getType)(t);"Object"===i&&t.value?e._addItem({value:t.value,label:t.label,choiceId:t.id,customProperties:t.customProperties,placeholder:t.placeholder}):"String"===i&&e._addItem({value:t})};this._presetItems.forEach(function(e){return t(e)})}},{key:"_setChoiceOrItem",value:function(e){var t=this,i=(0,y.getType)(e).toLowerCase();({object:function(){e.value&&t._addChoice({value:e.value,label:e.label,isSelected:!0,isDisabled:!1,customProperties:e.customProperties,placeholder:e.placeholder})},string:function(){t._addChoice({value:e,label:e,isSelected:!0,isDisabled:!1})}})[i]()}},{key:"_findAndSelectChoiceByValue",value:function(e){var t=this,i=this._store.choices,n=i.find(function(i){return t.config.itemComparer(i.value,e)});n&&!n.selected&&this._addItem({value:n.value,label:n.label,id:n.id,groupId:n.groupId,customProperties:n.customProperties,placeholder:n.placeholder,keyCode:n.keyCode})}},{key:"_generatePlaceholderValue",value:function(){return!!this.config.placeholder&&(this.config.placeholderValue||this.passedElement.element.getAttribute("placeholder"))}},{key:"_renderChoices",value:function(){var e=this,t=this._store,i=t.activeGroups,n=t.activeChoices,r=document.createDocumentFragment();if(this.choiceList.clear(),this.config.resetScrollPosition&&requestAnimationFrame(function(){return e.choiceList.scrollToTop()}),i.length>=1&&!this._isSearching){var o=n.filter(function(e){return!0===e.placeholder&&-1===e.groupId});o.length>=1&&(r=this._createChoicesFragment(o,r)),r=this._createGroupsFragment(i,n,r)}else n.length>=1&&(r=this._createChoicesFragment(n,r));if(r.childNodes&&r.childNodes.length>0){var s=this._store.activeItems,a=this._canAddItem(s,this.input.value);a.response?(this.choiceList.append(r),this._highlightChoice()):this.choiceList.append(this._getTemplate("notice",a.notice))}else{var c=void 0,l=void 0;this._isSearching?(l=(0,y.isType)("Function",this.config.noResultsText)?this.config.noResultsText():this.config.noResultsText,c=this._getTemplate("notice",l,"no-results")):(l=(0,y.isType)("Function",this.config.noChoicesText)?this.config.noChoicesText():this.config.noChoicesText,c=this._getTemplate("notice",l,"no-choices")),this.choiceList.append(c)}}},{key:"_renderItems",value:function(){var e=this._store.activeItems||[];if(this.itemList.clear(),e.length){var t=this._createItemsFragment(e);t.childNodes&&this.itemList.append(t)}}}]),e}();t.default=b},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){var i=t.element,r=t.type,o=t.classNames;n(this,e),Object.assign(this,{element:i,type:r,classNames:o}),this.isActive=!1}return r(e,[{key:"distanceFromTopWindow",value:function(){return this.dimensions=this.element.getBoundingClientRect(),this.position=Math.ceil(this.dimensions.top+window.pageYOffset+this.element.offsetHeight),this.position}},{key:"getChild",value:function(e){return this.element.querySelector(e)}},{key:"show",value:function(){return this.element.classList.add(this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this}},{key:"hide",value:function(){return this.element.classList.remove(this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this}}]),e}();t.default=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(0),s=function(){function e(t){var i=t.element,r=t.type,o=t.classNames,s=t.position;n(this,e),Object.assign(this,{element:i,classNames:o,type:r,position:s}),this.isOpen=!1,this.isFlipped=!1,this.isFocussed=!1,this.isDisabled=!1,this.isLoading=!1,this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return r(e,[{key:"addEventListeners",value:function(){this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur)}},{key:"removeEventListeners",value:function(){this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)}},{key:"shouldFlip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.getWindowHeight)();if(void 0===e)return!1;var i=!1;return"auto"===this.position?i=e>=t:"top"===this.position&&(i=!0),i}},{key:"setActiveDescendant",value:function(e){this.element.setAttribute("aria-activedescendant",e)}},{key:"removeActiveDescendant",value:function(){this.element.removeAttribute("aria-activedescendant")}},{key:"open",value:function(e){this.element.classList.add(this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(e)&&(this.element.classList.add(this.classNames.flippedState),this.isFlipped=!0)}},{key:"close",value:function(){this.element.classList.remove(this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(this.element.classList.remove(this.classNames.flippedState),this.isFlipped=!1)}},{key:"focus",value:function(){this.isFocussed||this.element.focus()}},{key:"addFocusState",value:function(){this.element.classList.add(this.classNames.focusState)}},{key:"removeFocusState",value:function(){this.element.classList.remove(this.classNames.focusState)}},{key:"enable",value:function(){this.element.classList.remove(this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),"select-one"===this.type&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1}},{key:"disable",value:function(){this.element.classList.add(this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),"select-one"===this.type&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0}},{key:"wrap",value:function(e){(0,o.wrap)(e,this.element)}},{key:"unwrap",value:function(e){this.element.parentNode.insertBefore(e,this.element),this.element.parentNode.removeChild(this.element)}},{key:"addLoadingState",value:function(){this.element.classList.add(this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0}},{key:"removeLoadingState",value:function(){this.element.classList.remove(this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1}},{key:"_onFocus",value:function(){this.isFocussed=!0}},{key:"_onBlur",value:function(){this.isFocussed=!1}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(0),s=function(){function e(t){var i=t.element,r=t.type,o=t.classNames,s=t.placeholderValue;n(this,e),Object.assign(this,{element:i,type:r,classNames:o,placeholderValue:s}),this.element=i,this.classNames=o,this.isFocussed=this.element===document.activeElement,this.isDisabled=!1,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return r(e,[{key:"addEventListeners",value:function(){this.element.addEventListener("input",this._onInput),this.element.addEventListener("paste",this._onPaste),this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur),this.element.form&&this.element.form.addEventListener("reset",this._onFormReset)}},{key:"removeEventListeners",value:function(){this.element.removeEventListener("input",this._onInput),this.element.removeEventListener("paste",this._onPaste),this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur),this.element.form&&this.element.form.removeEventListener("reset",this._onFormReset)}},{key:"enable",value:function(){this.element.removeAttribute("disabled"),this.isDisabled=!1}},{key:"disable",value:function(){this.element.setAttribute("disabled",""),this.isDisabled=!0}},{key:"focus",value:function(){this.isFocussed||this.element.focus()}},{key:"blur",value:function(){this.isFocussed&&this.element.blur()}},{key:"clear",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.element.value&&(this.element.value=""),e&&this.setWidth(),this}},{key:"setWidth",value:function(e){var t=this,i=function(e){t.element.style.width=e};if(this._placeholderValue){var n=this.element.value.length>=this._placeholderValue.length/1.25;(this.element.value&&n||e)&&this.calcWidth(i)}else this.calcWidth(i)}},{key:"calcWidth",value:function(e){return(0,o.calcWidthOfInput)(this.element,e)}},{key:"setActiveDescendant",value:function(e){this.element.setAttribute("aria-activedescendant",e)}},{key:"removeActiveDescendant",value:function(){this.element.removeAttribute("aria-activedescendant")}},{key:"_onInput",value:function(){"select-one"!==this.type&&this.setWidth()}},{key:"_onPaste",value:function(e){e.target===this.element&&this.preventPaste&&e.preventDefault()}},{key:"_onFocus",value:function(){this.isFocussed=!0}},{key:"_onBlur",value:function(){this.isFocussed=!1}},{key:"placeholder",set:function(e){this.element.placeholder=e}},{key:"value",set:function(e){this.element.value=""+e},get:function(){return(0,o.stripHTML)(this.element.value)}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(1),s=function(){function e(t){var i=t.element;n(this,e),Object.assign(this,{element:i}),this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight,this.hasChildren=!!this.element.children}return r(e,[{key:"clear",value:function(){this.element.innerHTML=""}},{key:"append",value:function(e){this.element.appendChild(e)}},{key:"getChild",value:function(e){return this.element.querySelector(e)}},{key:"scrollToTop",value:function(){this.element.scrollTop=0}},{key:"scrollToChoice",value:function(e,t){var i=this;if(e){var n=this.element.offsetHeight,r=e.offsetHeight,o=e.offsetTop+r,s=this.element.scrollTop+n,a=t>0?this.element.scrollTop+o-s:e.offsetTop;requestAnimationFrame(function(e){i._animateScroll(e,a,t)})}}},{key:"_scrollDown",value:function(e,t,i){var n=(i-e)/t,r=n>1?n:1;this.element.scrollTop=e+r}},{key:"_scrollUp",value:function(e,t,i){var n=(e-i)/t,r=n>1?n:1;this.element.scrollTop=e-r}},{key:"_animateScroll",value:function(e,t,i){var n=this,r=o.SCROLLING_SPEED,s=this.element.scrollTop,a=!1;i>0?(this._scrollDown(s,r,t),s<t&&(a=!0)):(this._scrollUp(s,r,t),s>t&&(a=!0)),a&&requestAnimationFrame(function(){n._animateScroll(e,t,i)})}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(n)},c=i(41),l=function(e){return e&&e.__esModule?e:{default:e}}(c),u=i(0),h=function(e){function t(e){var i=e.element,o=e.classNames,s=e.delimiter;n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{element:i,classNames:o}));return a.delimiter=s,a}return o(t,e),s(t,[{key:"value",set:function(e){var t=(0,u.reduceToValues)(e),i=t.join(this.delimiter);this.element.setAttribute("value",i),this.element.value=i},get:function(){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this)}}]),t}(l.default);t.default=h},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(41),l=n(c),u=i(12),h=n(u),d=function(e){function t(e){var i=e.element,n=e.classNames;return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{element:i,classNames:n}))}return s(t,e),a(t,[{key:"appendDocFragment",value:function(e){this.element.innerHTML="",this.element.appendChild(e)}},{key:"placeholderOption",get:function(){return this.element.querySelector("option[placeholder]")}},{key:"optionGroups",get:function(){return Array.from(this.element.getElementsByTagName("OPTGROUP"))}},{key:"options",get:function(){return Array.from(this.element.options)},set:function(e){var t=document.createDocumentFragment(),i=function(e){var i=h.default.option(e);t.appendChild(i)};e.forEach(function(e){return i(e)}),this.appendDocFragment(t)}}]),t}(l.default);t.default=d}])});